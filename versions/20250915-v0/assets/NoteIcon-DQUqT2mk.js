import{o as C,x as S,C as m,a3 as E,p as I,v as _,bs as N,a1 as D,bi as R,ak as q,T as K,U as A,K as H,bt as U,bl as k,bu as $,a4 as z,bv as W,aa as G,bw as J,ab as L,af as M,ag as O,aO as X,ah as B,ai as T,an as Y,ar as Z,as as F,a_ as ee,aj as te,ao as oe}from"./index-WyGaQITf.js";import{Q as ne,_ as ae}from"./_plugin-vue_export-helper-D9bj9lvg.js";import{c as le}from"./QTooltip-RdSUjGeD.js";const de=C({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:s}){const t=S(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>m("div",{class:t.value},E(s.default))}});function h(e,s=new WeakMap){if(Object(e)!==e)return e;if(s.has(e))return s.get(e);const t=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const a=e.valueOf();if(Object(a)!==a){const i=new e.constructor(a);return s.set(e,i),i}}return s.set(e,t),e instanceof Set?e.forEach(a=>{t.add(h(a,s))}):e instanceof Map&&e.forEach((a,i)=>{t.set(i,h(a,s))}),Object.assign(t,...Object.keys(e).map(a=>({[a]:h(e[a],s)})))}const ue=C({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:s,emit:t}){const{proxy:a}=I(),{$q:i}=a,c=_(null),r=_(""),n=_("");let b=!1;const w=S(()=>N({initialValue:r.value,validate:e.validate,set:p,cancel:d,updatePosition:g},"value",()=>n.value,l=>{n.value=l}));function p(){e.validate(n.value)!==!1&&(o()===!0&&(t("save",n.value,r.value),t("update:modelValue",n.value)),f())}function d(){o()===!0&&t("cancel",n.value,r.value),f()}function g(){D(()=>{c.value.updatePosition()})}function o(){return R(n.value,r.value)===!1}function f(){b=!0,c.value.hide()}function y(){b=!1,r.value=h(e.modelValue),n.value=h(e.modelValue),t("beforeShow")}function x(){t("show")}function V(){b===!1&&o()===!0&&(e.autoSave===!0&&e.validate(n.value)===!0?(t("save",n.value,r.value),t("update:modelValue",n.value)):t("cancel",n.value,r.value)),t("beforeHide")}function Q(){t("hide")}function u(){const l=s.default!==void 0?[].concat(s.default(w.value)):[];return e.title&&l.unshift(m("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&l.push(m("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[m(q,{flat:!0,color:e.color,label:e.labelCancel||i.lang.label.cancel,onClick:d}),m(q,{flat:!0,color:e.color,label:e.labelSet||i.lang.label.set,onClick:p})])),l}return Object.assign(a,{set:p,cancel:d,show(l){c.value?.show(l)},hide(l){c.value?.hide(l)},updatePosition:g}),()=>{if(e.disable!==!0)return m(ne,{ref:c,class:"q-popup-edit",cover:e.cover,onBeforeShow:y,onShow:x,onBeforeHide:V,onHide:Q,onEscapeKey:d},u)}}}),ve=C({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:s}){const t=S(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>m("div",{class:t.value,role:"toolbar"},E(s.default))}}),be=C({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:s,emit:t}){const a=I(),i=_(null);let c=0;const r=[];function n(o){const f=typeof o=="boolean"?o:e.noErrorFocus!==!0,y=++c,x=(u,l)=>{t(`validation${u===!0?"Success":"Error"}`,l)},V=u=>{const l=u.validate();return typeof l.then=="function"?l.then(v=>({valid:v,comp:u}),v=>({valid:!1,comp:u,err:v})):Promise.resolve({valid:l,comp:u})};return(e.greedy===!0?Promise.all(r.map(V)).then(u=>u.filter(l=>l.valid!==!0)):r.reduce((u,l)=>u.then(()=>V(l).then(v=>{if(v.valid===!1)return Promise.reject(v)})),Promise.resolve()).catch(u=>[u])).then(u=>{if(u===void 0||u.length===0)return y===c&&x(!0),!0;if(y===c){const{comp:l,err:v}=u[0];if(v!==void 0&&console.error(v),x(!1,l),f===!0){const P=u.find(({comp:j})=>typeof j.focus=="function"&&U(j.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function b(){c++,r.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function w(o){o!==void 0&&k(o);const f=c+1;n().then(y=>{f===c&&y===!0&&(e.onSubmit!==void 0?t("submit",o):o?.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function p(o){o!==void 0&&k(o),t("reset"),D(()=>{b(),e.autofocus===!0&&e.noResetFocus!==!0&&d()})}function d(){$(()=>{if(i.value===null)return;(i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),f=>f.tabIndex!==-1))?.focus({preventScroll:!0})})}z(W,{bindComponent(o){r.push(o)},unbindComponent(o){const f=r.indexOf(o);f!==-1&&r.splice(f,1)}});let g=!1;return K(()=>{g=!0}),A(()=>{g===!0&&e.autofocus===!0&&d()}),H(()=>{e.autofocus===!0&&d()}),Object.assign(a.proxy,{validate:n,resetValidation:b,submit:w,reset:p,focus:d,getValidationComponents:()=>r}),()=>m("form",{class:"q-form",ref:i,onSubmit:w,onReset:p},E(s.default))}}),se={class:"note-tooltip"},re=G({__name:"NoteIcon",props:{element:{type:J,default:null},elementType:{type:String,default:""}},setup(e){const s=L(),t=e,a=S({get:()=>t.element?t.element.note:"",set:c=>{t.element&&s.updateElement(t.element,{note:c})}}),i=S(()=>a.value?["note"]:["note","note-is-empty"]);return(c,r)=>(O(),M(q,{size:"xs",flat:"",round:"",class:X(i.value),icon:"mdi-chat-outline"},{default:B(()=>[T(ue,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=n=>a.value=n),"auto-save":"",buttons:""},{default:B(n=>[T(Z,{label:"Note",type:"textarea",modelValue:n.value,"onUpdate:modelValue":b=>n.value=b,onKeyup:[F(ee(n.set,["ctrl"]),["enter"]),F(n.cancel,["esc"])],dense:"",autogrow:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:1},8,["modelValue"]),a.value?(O(),M(le,{key:0,class:"bg-blue-grey-2 text-black"},{default:B(()=>[te("pre",se,oe(a.value),1)]),_:1})):Y("",!0)]),_:1},8,["class"]))}}),me=ae(re,[["__scopeId","data-v-bf722bfd"]]);export{me as N,ve as Q,de as a,ue as b,be as c};
