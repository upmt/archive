import{o as ot,aY as Un,aZ as Qn,x as g,y as pe,O as Jn,p as St,P as Kn,v as D,a1 as Me,C as W,a3 as Vt,a2 as Wn,V as jt,aa as re,a8 as Xn,am as I,ag as u,an as j,aj as k,ae as It,aO as de,aW as Te,at as Y,au as ee,ai as c,af as P,ah as S,ao as L,al as J,ak as ie,a_ as ye,G as yt,ac as ke,ad as Fe,ab as me,a$ as mn,av as ge,ar as Ae,as as et,ap as tt,b0 as Zn,b1 as Yn,K as eo,b2 as vn,b3 as to,b4 as no,b5 as oo,b6 as ao,b7 as io,aN as lo,aP as en,b8 as ro,ax as pn,b9 as gn,ba as Dt,bb as yn,bc as hn,L as so,Q as co,bd as uo,T as fo,U as mo,z as Sn,be as vo,bf as po,bg as tn,bh as go,bi as st,bj as yo,bk as $t,bl as Je,bm as ho,bn as So,aH as Ke,bo as Io,bp as wo,bq as bo,br as Co,a9 as _o}from"./index-WyGaQITf.js";import{u as xo,a as ko,b as Vo,D as Ce,_ as In,Q as nn,r as zt,c as $o,d as on,e as Mo}from"./ColorizeIcon.vue_vue_type_style_index_0_lang-FfnyXhBR.js";import{C as ht,Q as Et,a as Ao,b as To,c as zo}from"./ClosePopup-BgoInFy_.js";import{b as nt,N as qt,Q as Rt,c as Oo,a as jo}from"./NoteIcon-DQUqT2mk.js";import{T as Do}from"./TouchPan-_iLfzzbU.js";import{c as Ie,Q as wn,a as Ze,u as bn,b as Cn}from"./QTooltip-RdSUjGeD.js";import{_ as ve,Q as ut,n as an}from"./_plugin-vue_export-helper-D9bj9lvg.js";const ln=ot({name:"QRouteTab",props:{...Un,...xo},emits:ko,setup(e,{slots:a,emit:t}){const n=Qn({useDisableForRouterLinkProps:!1}),{renderTab:r,$tabs:i}=Vo(e,a,t,{exact:g(()=>e.exact),...n});return pe(()=>`${e.name} | ${e.exact} | ${(n.resolvedLink.value||{}).href}`,i.verifyRouteModel),()=>r(n.linkTag.value,n.linkAttrs.value)}}),Mt=ot({name:"QSplitter",props:{...Jn,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:a,emit:t}){const{proxy:{$q:n}}=St(),r=Kn(e,n),i=D(null),s={before:D(null),after:D(null)},y=g(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(r.value===!0?" q-splitter--dark":"")),f=g(()=>e.horizontal===!0?"height":"width"),d=g(()=>e.reverse!==!0?"before":"after"),l=g(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function v(T){return(e.unit==="%"?T:Math.round(T))+e.unit}const b=g(()=>({[d.value]:{[f.value]:v(e.modelValue)}}));let x,V,z,h,m;function C(T){if(T.isFirst===!0){const F=i.value.getBoundingClientRect()[f.value];x=e.horizontal===!0?"up":"left",V=e.unit==="%"?100:F,z=Math.min(V,l.value[1],Math.max(l.value[0],e.modelValue)),h=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:n.lang.rtl===!0?-1:1)*(e.unit==="%"?F===0?0:100/F:1),i.value.classList.add("q-splitter--active");return}if(T.isFinal===!0){m!==e.modelValue&&t("update:modelValue",m),i.value.classList.remove("q-splitter--active");return}const _=z+h*(T.direction===x?-1:1)*T.distance[e.horizontal===!0?"y":"x"];m=Math.min(V,l.value[1],Math.max(l.value[0],_)),s[d.value].value.style[f.value]=v(m),e.emitImmediately===!0&&e.modelValue!==m&&t("update:modelValue",m)}const E=g(()=>[[Do,C,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function w(T,_){T<_[0]?t("update:modelValue",_[0]):T>_[1]&&t("update:modelValue",_[1])}return pe(()=>e.modelValue,T=>{w(T,l.value)}),pe(()=>e.limits,()=>{Me(()=>{w(e.modelValue,l.value)})}),()=>{const T=[W("div",{ref:s.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:b.value.before},Vt(a.before)),W("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Wn("div",{class:"q-splitter__separator-area absolute-full"},Vt(a.separator),"sep",e.disable!==!0,()=>E.value)]),W("div",{ref:s.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:b.value.after},Vt(a.after))];return W("div",{class:y.value,ref:i},jt(a.default,T))}}}),Eo={key:0,viewBox:"0 0 100 100",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg"},qo=["y1","y2","stroke-width"],Ro=["y1","x2","y2","stroke-width"],No=["d","stroke-width"],Fo=["d","stroke-width"],Bo=["d","stroke-width"],Po=re({__name:"SpecificSynchronicCategoryRelation",props:{childrenCount:{type:Number,default:1},type:{type:String,default:""}},setup(e){const a=e,t=D(null),n=Xn({width:100,height:100}),r=D(1),i=g(()=>20),s=g(()=>6/1.05**a.childrenCount),y=g(()=>a.type==="aggregation"),f=g(()=>a.type==="specialization"),d=g(()=>a.childrenCount===0),l=g(()=>({x:n.width,y:n.height/2})),v=g(()=>({x:n.width/2,y:n.height/a.childrenCount/2}));return(b,x)=>(u(),I("div",{ref_key:"container",ref:t,class:"tree-box",style:{width:"100%",height:"100%",position:"relative"}},[e.childrenCount?(u(),I("svg",Eo,[k("g",null,[k("line",{"vector-effect":"non-scaling-stroke",x1:0,y1:v.value.y,x2:0,y2:n.height-v.value.y,stroke:"black","stroke-width":r.value},null,8,qo),k("line",{"vector-effect":"non-scaling-stroke",x1:0,y1:l.value.y,x2:l.value.x,y2:l.value.y,stroke:"black","stroke-width":r.value},null,8,Ro),y.value?(u(),I("path",{key:0,"vector-effect":"non-scaling-stroke",d:`M${l.value.x} ${l.value.y} l -${i.value} -${s.value} l -${i.value} ${s.value} l ${i.value} ${s.value} Z`,fill:"white",stroke:"black","stroke-width":r.value},null,8,No)):j("",!0),f.value?(u(),I("path",{key:1,d:`M${l.value.x} ${l.value.y} l -${2*i.value} -${2*s.value} l 0 ${4*s.value} Z`,fill:"white",stroke:"black","stroke-width":r.value},null,8,Fo)):j("",!0),d.value?(u(),I("path",{key:2,d:`M${l.value.x-i.value} ${l.value.y-s.value} l ${i.value} ${s.value} l -${i.value} ${s.value}`,fill:"none",stroke:"black","stroke-width":r.value},null,8,Bo)):j("",!0)])])):j("",!0)],512))}}),qe=ve(Po,[["__scopeId","data-v-ea03dcbe"]]),Lo=["data-genericsynchroniccategory"],Go=["data-genericsynchroniccategory"],Ho={class:"genericsynchroniccategory-children"},Uo={key:0,class:"genericsynchroniccategory-relation"},Qo={class:"genericsynchroniccategory-name"},Jo={key:1,class:"genericsynchroniccategory-filler"},Ko=re({__name:"GenericSynchronicCategoryOverview",props:{projectId:{},category:{},currentInterviewId:{}},setup(e){const a=e,t=g(()=>a.category.instances[0]?.abstractionType||"");return(n,r)=>{const i=It("GenericSynchronicCategoryOverview",!0);return u(),I("div",{ref:"container",class:de(["genericsynchroniccategory-container",`genericsynchroniccategory-${n.category.name}`]),"data-genericsynchroniccategory":n.category.name},[n.category?(u(),I("div",{key:0,class:de(["genericsynchroniccategory",{"root-generic-synchronic-category":n.category.isRoot}]),style:Te({backgroundColor:n.category.color}),"data-genericsynchroniccategory":n.category.name},[k("div",Ho,[(u(!0),I(Y,null,ee(n.category.children,s=>(u(),I("div",{key:s.name},[c(i,{projectId:n.projectId,currentInterviewId:n.currentInterviewId,category:s},null,8,["projectId","currentInterviewId","category"])]))),128))]),n.category.children?.length?(u(),I("div",Uo,[c(qe,{type:t.value,childrenCount:n.category.children?.length},null,8,["type","childrenCount"])])):j("",!0),k("div",{class:de(["genericsynchroniccategory-header",{"has-error":n.category.errors?.length}])},[c(Ce,{type:"genericsynchroniccategory",data:n.category.name},{default:S(()=>[k("span",Qo,L(n.category.name),1)]),_:1},8,["data"]),n.category.errors?.length?(u(),P(Ie,{key:0,class:"bg-red-5",anchor:"top right",self:"top left"},{default:S(()=>[J(L(n.category.name)+" ",1),(u(!0),I(Y,null,ee(n.category.errors,(s,y)=>(u(),I("div",{key:y},L(s),1))),128))]),_:1})):(u(),P(Ie,{key:1,anchor:"top right",self:"top left"},{default:S(()=>[J(L(n.category.name),1)]),_:1}))],2),n.category.isRoot?j("",!0):(u(),I("div",Jo,[c(qe,{childrenCount:1})]))],14,Go)):j("",!0)],10,Lo)}}}),Wo=ve(Ko,[["__scopeId","data-v-75e65e05"]]),Xo=["data-project"],Zo=re({__name:"GenericCategoriesOverview",props:{projectId:{},categories:{},currentInterviewId:{}},setup(e){return(a,t)=>(u(),I("div",{class:"genericcategories-container",key:a.projectId,"data-project":a.projectId},[(u(!0),I(Y,null,ee(a.categories,n=>(u(),P(Wo,{key:n.name,projectId:a.projectId,currentInterviewId:a.currentInterviewId,category:n},null,8,["projectId","currentInterviewId","category"]))),128))],8,Xo))}}),Yo=ve(Zo,[["__scopeId","data-v-c31cfd98"]]),Re=ot({name:"QSpace",setup(){const e=W("div",{class:"q-space"});return()=>e}}),Ne=re({__name:"ElementMenu",props:{actions:{}},setup(e){return(a,t)=>(u(),P(ie,{class:"menu-icon",size:"xs",onClick:t[0]||(t[0]=ye(()=>{},["stop"])),flat:"",round:"",dense:"",icon:"more_vert"},{default:S(()=>[c(ut,{"touch-position":""},{default:S(()=>[c(wn,{dense:"",style:{"min-width":"100px"}},{default:S(()=>[(u(!0),I(Y,null,ee(a.actions,([n,r])=>yt((u(),P(Ze,{clickable:"",key:n,onClick:r},{default:S(()=>[J(L(n),1)]),_:2},1032,["onClick"])),[[ht]])),128))]),_:1})]),_:1})]),_:1}))}}),ea=["#ff9797","#7084b0","#ffdc97","#7bcf7b"];/*!
 * Group items from an array together by some criteria or value.
 * (c) 2019 Tom Bremmer (https://tbremer.com/) and Chris Ferdinandi (https://gomakethings.com), MIT License,
 * @param  {Array}           arr      The array to group items from
 * @param  {String|Function} criteria The criteria to group by
 * @return {Object}                   The grouped object
 */function ta(e,a){return e.reduce(function(t,n){const r=n[a];return Object.hasOwn(t,r)||(t[r]=[]),t[r].push(n),t},{})}function rn(e,a,t){return Math.max(a,Math.min(e,t))}const na=["data-genericcategory"],oa={class:"genericsynchroniccategory-label"},aa={class:"interview-name"},ia={class:"interview-moment-count"},la={class:"genericsynchroniccategory-children"},ra=re({__name:"GenericCategoryRepresentation",props:{genericcategory:{},genericGraphs:{},currentInterviewId:{}},setup(e){const a=ke(),{highlightedMomentId:t}=Fe(a),n=me(),r=e,i=D(null),s=mn();function y(){window.genericcategory=r.genericcategory,console.log("genericcategory",r.genericcategory)}const f=g(()=>{const m=r.genericcategory.instances.map(C=>r.genericGraphs.instanceIdToContainerInfo[C.id]?.momentId).filter(C=>!!C);return n.getMoments(m)}),d=g(()=>f.value?.filter(m=>m.interviewId===r.currentInterviewId)||[]),l=g(()=>r.genericcategory.abstractionType=="aggregation"),v=g(()=>r.genericcategory.abstractionType=="specialization"),b=g({get(){return r.genericcategory?r.genericcategory.name:""},set(m){console.log(`Renaming ${r.genericcategory.name} to ${m}`)}});function x(m){t.value===m?t.value="":t.value=m}function V(m){const C=n.getRepo(),E=Object.fromEntries(C.Interview.get().map(w=>[w.id,w.label]));return Object.entries(ta(m,"interviewId")).map(([w,T])=>[E[w],T.length])}function z(m){s.push({query:{tab:m}}).catch(C=>{console.log(`Error when switching view: ${C}`)})}const h=[["Debug",()=>y()]];return(m,C)=>{const E=It("GenericCategoryRepresentation",!0);return m.genericcategory?(u(),I("div",{key:0,class:"genericsynchroniccategory-container row","data-genericcategory":m.genericcategory.name},[c(Et,{class:"genericsynchroniccategory-body",dense:"","dense-toggle":"",duration:0,"expand-icon-toggle":"","expand-icon-class":{invisible:m.genericcategory.children?.length==0},"switch-toggle-side":"","no-v-model":"expand","header-class":"header-class",title:m.genericcategory.name,"content-inset-level":.2},{header:S(()=>[c(Ce,{class:de(["genericsynchroniccategory-name",{"has-error":m.genericcategory.errors?.length}]),style:Te({backgroundColor:m.genericcategory.color}),onClick:y,type:"genericsynchroniccategory",data:m.genericcategory.name},{default:S(()=>[c(ge,{ref:"handle",class:"genericsynchroniccategory-handle",size:"xs",name:"mdi-source-branch-check"},null,512),v.value?(u(),P(ge,{key:0,size:"xs",name:"mdi-triangle-outline"})):j("",!0),l.value?(u(),P(ge,{key:1,size:"xs",name:"mdi-cards-diamond-outline"})):j("",!0),m.genericcategory.errors?.length?(u(),P(Ie,{key:2,class:"bg-red-5",anchor:"top right",self:"top left"},{default:S(()=>[(u(!0),I(Y,null,ee(m.genericcategory.errors,(w,T)=>(u(),I("div",{key:T},L(w),1))),128))]),_:1})):j("",!0),k("span",oa,[J(L(m.genericcategory.name)+" ",1),c(ie,{size:"sm",dense:""},{default:S(()=>[c(ut,{class:"column"},{default:S(()=>[(u(!0),I(Y,null,ee(d.value,w=>(u(),P(ie,{label:w.name,align:"left","no-caps":"",key:w.id,onClick:T=>x(w.id),size:"sm",style:Te({backgroundColor:w.color}),icon:"mdi-alpha-m-box-outline"},null,8,["label","onClick","style"]))),128))]),_:1}),J(" "+L(d.value.length),1)]),_:1}),C[2]||(C[2]=J(" / ",-1)),c(ie,{size:"sm",dense:""},{default:S(()=>[c(ut,{class:"column"},{default:S(()=>[(u(!0),I(Y,null,ee(V(f.value),([w,T])=>(u(),I("div",{class:"row items-left no-wrap",key:w},[c(ie,{class:"full-width justify-content-between",align:"left","no-caps":"",onClick:_=>z(w),size:"sm"},{default:S(()=>[k("span",aa,L(w),1)]),_:2},1032,["onClick"]),k("strong",ia,L(T),1)]))),128))]),_:1}),J(" "+L(f.value.length),1)]),_:1}),c(nt,{ref_key:"popupEdit",ref:i,modelValue:b.value,"onUpdate:modelValue":C[1]||(C[1]=w=>b.value=w),"auto-save":""},{default:S(w=>[c(Ae,{modelValue:w.value,"onUpdate:modelValue":T=>w.value=T,onFocus:C[0]||(C[0]=T=>T.target.select()),dense:"",autofocus:"",counter:"",onKeyup:et(w.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:1},8,["modelValue"])]),c(Re),c(Ne,{actions:h})]),_:1},8,["class","style","data"])]),default:S(()=>[k("div",la,[(u(!0),I(Y,null,ee(m.genericcategory.children,w=>(u(),P(E,{key:w.name,genericGraphs:m.genericGraphs,genericcategory:w,currentInterviewId:m.currentInterviewId},null,8,["genericGraphs","genericcategory","currentInterviewId"]))),128))])]),_:1},8,["expand-icon-class","title"])],8,na)):j("",!0)}}}),sa=ve(ra,[["__scopeId","data-v-6218a0e2"]]),ca=["data-project"],ua={class:"text-title2 text-bold"},da=re({__name:"GenericCategoriesRepresentation",props:{projectId:{},genericGraphs:{},currentInterviewId:{}},setup(e){const a=me(),t=ke(),n=bn(),r=e;function i(){const f=a.getGenericSynchronicModel(r.projectId);f&&t.setEditedSpecificSynchronicModelId(f.proxy.id)}function s(){const f=a.buildGenericSynchronicModelFromGraphs(r.projectId,r.genericGraphs);f&&n.notify({type:"info",message:`Stored as ${f.name}`})}const y=[["Edit generic model",()=>i()],["Store as model",()=>s()]];return(f,d)=>(u(),I("div",{class:"genericcategories-container",key:f.projectId,"data-project":f.projectId},[k("div",ua,[d[1]||(d[1]=J("Generic model ",-1)),c(ie,{flat:"",dense:"",size:"xs",title:"Edit generic model",onClick:d[0]||(d[0]=l=>i()),icon:"edit","no-caps":""}),c(Ne,{actions:y})]),(u(!0),I(Y,null,ee(f.genericGraphs.categories,l=>(u(),P(sa,{key:l.name,genericGraphs:f.genericGraphs,genericcategory:l,currentInterviewId:f.currentInterviewId},null,8,["genericGraphs","genericcategory","currentInterviewId"]))),128))],8,ca))}}),fa=["top","middle","bottom"],Ot=ot({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>fa.includes(e)}},setup(e,{slots:a}){const t=g(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=g(()=>{const r=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(r!==void 0?` text-${r}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>W("div",{class:n.value,style:t.value,role:"status","aria-label":e.label},jt(a.default,e.label!==void 0?[e.label]:[]))}});function ma(e){return Zn()?(Yn(e),!0):!1}function Xe(e){return typeof e=="function"?e():tt(e)}const va=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const pa=e=>e!=null;function _n(e){var a;const t=Xe(e);return(a=t?.$el)!=null?a:t}const xn=va?window:void 0;function ga(){const e=D(!1),a=St();return a&&eo(()=>{e.value=!0},a),e}function ya(e){const a=ga();return g(()=>(a.value,!!e()))}function ha(e,a,t={}){const{window:n=xn,...r}=t;let i;const s=ya(()=>n&&"MutationObserver"in n),y=()=>{i&&(i.disconnect(),i=void 0)},f=g(()=>{const b=Xe(e),x=(Array.isArray(b)?b:[b]).map(_n).filter(pa);return new Set(x)}),d=pe(()=>f.value,b=>{y(),s.value&&b.size&&(i=new MutationObserver(a),b.forEach(x=>i.observe(x,r)))},{immediate:!0,flush:"post"}),l=()=>i?.takeRecords(),v=()=>{y(),d()};return ma(v),{isSupported:s,stop:v,takeRecords:l}}function sn(e,a,t={}){const{window:n=xn,initialValue:r="",observe:i=!1}=t,s=D(r),y=g(()=>{var d;return _n(a)||((d=n?.document)==null?void 0:d.documentElement)});function f(){var d;const l=Xe(e),v=Xe(y);if(v&&n){const b=(d=n.getComputedStyle(v).getPropertyValue(l))==null?void 0:d.trim();s.value=b||r}}return i&&ha(y,f,{attributeFilter:["style","class"],window:n}),pe([y,()=>Xe(e)],f,{immediate:!0}),pe(s,d=>{var l;(l=y.value)!=null&&l.style&&y.value.style.setProperty(Xe(e),d)}),s}const Sa="#deadbabe",cn=(e,a)=>{const t=e.length;for(let n=0;n<t;n++)if(a<=e[n])return e.splice(n,0,a),n;return e.push(a),t},Ia=e=>{let n,r;const i=[],s=[],y=[];for(n=e.length,r=0;r<n;r++){const l=e[r],v=cn(i,l[1]);s.splice(v,0,l[0]),y.splice(v,0,1);const b=cn(i,l[1]+l[2]);s.splice(b,0,l[0]),y.splice(b,0,0)}const f=new Map;f.set(s[0],!0),n=s.length;function*d(){for(r=1;r<n;r++){const l=i[r],v=i[r-1];l>v&&(yield[l-v,Array.from(f.keys())]),y[r]===1?f.set(s[r],!0):f.delete(s[r])}}return{[Symbol.iterator]:d}},wa=(e,a)=>{let t=[];const n=["baseText",0,e.length];t.push(n);const r=a.map(d=>[d.id,d.start,d.length]);t=t.concat(r);const i=Array.from(Ia(t));let s=0,y=0;return i.map(d=>{const l=Number(d[0]);let v=d[1];v=v.filter(h=>h!=="baseText");const b=s,x=s+l,V=e.slice(b,x),z={id:y,start:b,length:l,text:V,annotationIds:v,get annotations(){return a.filter(h=>v.includes(h.id))}};return y=y+1,s=x,z})},ba={name:"AnnotatedText",emits:["selection"],props:{text:String,annotations:{type:Array,default:function(){return[]}},clearSelection:{type:Boolean,deefault:!1},getAnnotationColor:{type:Function,default:function(e){return null}},getAnnotationInfo:Function,spanEvents:{type:Object,default:function(){return{}}},getSpanClasses:{type:Function,default:function(e){return()=>{}}},spanAttributes:{type:Object,default:function(){return{}}}},computed:{spanClasses:{get(){return Object.fromEntries(this.spans.map(e=>[e.id,this.getSpanClasses(e)]))}},spans:function(){return wa(this.text,this.annotations)},preppedSpanEvents(){const e=this.spanEvents,a={};return Object.keys(e).forEach(t=>{const n=e[t],r=i=>{const s=this.elementSpanId(i.target),f=this.spanById(s).annotationIds,d=this.getAnnotations(f);n(i,d)};a[t]=r}),a}},methods:{elementSpanId(e){let a=e.attributes["data-span-id"].value;return a=Number(a),a},spanById(e){return this.spans.filter(n=>n.id===e)[0]},getAnnotations(e){return this.annotations.filter(t=>e.includes(t.id))},getSpanStyle:function(e){const a=this.getSpanColor(e);return a?{backgroundColor:a}:null},getSpanColor:function(e){let a=null;const t=e.annotationIds;let r=this.getAnnotations(t).map(i=>this.getAnnotationColor(i)).filter(i=>i);return r=[...new Set(r)],r.length>1?a=Sa:r.length&&(a=r[0]),a},getSelection:function(){const e=document.getSelection();if(e){const a=e.getRangeAt(0);if(a.startContainer.parentElement.parentElement===this.$refs.transcript){const n=Number(a.startContainer.parentElement.dataset.textOffset)+a.startOffset,r=Number(a.endContainer.parentElement.dataset.textOffset)+a.endOffset;return this.clearSelection&&e.removeAllRanges(),{begin:n,end:r,text:this.text.slice(n,r)}}}return null},emitSelection:function(){const e=this.getSelection();e&&e.begin!==e.end&&this.$emit("selection",e)}}},Ca=["data-span-id","data-annotation-ids","data-text-offset"];function _a(e,a,t,n,r,i){return u(),I("div",{class:"transcript",ref:"transcript",onMouseup:a[0]||(a[0]=(...s)=>i.emitSelection&&i.emitSelection(...s))},[(u(!0),I(Y,null,ee(i.spans,s=>(u(),I("span",to({key:s.id,"data-span-id":s.id,"data-annotation-ids":s.annotationIds,"data-text-offset":s.start,class:i.spanClasses[s.id],style:i.getSpanStyle(s)},{ref_for:!0},t.spanAttributes,no(i.preppedSpanEvents)),L(s.text),17,Ca))),128)),vn(e.$slots,"default",{},void 0,!0)],544)}const kn=ve(ba,[["render",_a],["__scopeId","data-v-f5881b47"]]),xa={key:0,class:"descriptem-modification"},ka=re({__name:"DescriptemModificationDialog",props:oo({initial:{type:Object}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const a=me(),t=ao(e,"modelValue"),n=e,r=g(()=>t.value?a.getInterview(t.value.interviewId):null),i=g(()=>r.value?r.value.text:"");function s(l){const v=l.annotations.map(b=>b.class);return[...new Set(v)].join(" ")}const y=g(()=>n.initial?n.initial.endIndex-n.initial.startIndex:0),f=g(()=>{const l=[];if(t.value&&n.initial){const v=t.value.interviewId,b=r.value?.text.length??0,x=t.value.endIndex-t.value.startIndex,V=rn(n.initial.startIndex-y.value-1,0,b),z=rn(n.initial.endIndex+y.value+1,0,b);V&&l.push({interviewId:v,id:"hidden_start",start:0,length:V,class:"hidden extractStart"}),l.push({interviewId:v,id:"current_extract",start:n.initial.startIndex,length:n.initial.endIndex-n.initial.startIndex,class:"extractOriginal"}),l.push({interviewId:v,id:"new_selection",start:t.value.startIndex,length:x,class:"extractHighlight"}),z<b&&l.push({interviewId:v,id:"hidden_end",start:z,length:b-z,class:"hidden extractEnd"})}return l});function d(l){t.value&&(t.value.startIndex=l.begin,t.value.endIndex=l.end)}return(l,v)=>t.value?(u(),I("div",xa,[v[0]||(v[0]=k("span",{class:"text-italic"},[J("The "),k("u",null,"original descriptem"),J(" is underlined, the "),k("b",null,"new selection"),J(" is bold")],-1)),c(kn,{class:"textAnnotationComponent",text:i.value,annotations:f.value,getSpanClasses:s,clearSelection:"",onSelection:d},null,8,["text","annotations"])])):j("",!0)}}),Va=ve(ka,[["__scopeId","data-v-64c3c2c3"]]),$a=["data-descriptem","title"],Ma={class:"descriptem-label"},Aa={key:0,class:"descriptem-context"},Ta={key:0,class:"context-item"},za={class:"property-name"},Oa={class:"property-value"},ja={key:1,class:"context-item"},Da={class:"categoryinstance-name"},Ea={class:"moment-name"},qa={key:1,class:"descriptem-menu"},Ra=re({__name:"DescriptemRepresentation",props:{descriptemId:{type:String,default:""},withContext:{type:Boolean,default:!1},withMenu:{type:Boolean,default:!0}},setup(e){const a=me(),t=ke(),n=e,r=g(()=>a.getDescriptem(n.descriptemId)),{highlightedDescriptemId:i,highlightedMomentId:s}=Fe(t);function y(){window.descriptem=r.value,console.log("Descriptem",r.value?.toJSON())}function f(){i.value===n.descriptemId?i.value="":i.value=n.descriptemId}const d=g(()=>{if(r.value&&r.value.justification){const x=a.getJustificationParent(r.value.justification.parentId);return x?(console.log("Context",x,x.asContext),x.asContext):{}}else return{}}),l=g({get:()=>r.value?.toJSON()??{},set:x=>{a.updateDescriptem(n.descriptemId,{startIndex:x.startIndex,endIndex:x.endIndex})}});function v(x){s.value=x}const b=[["Modify",()=>alert("Not implemented yet")],["Duplicate",()=>a.duplicateDescriptem(n.descriptemId)],["Delete",()=>a.deleteDescriptem(n.descriptemId)]];return(x,V)=>r.value?(u(),I("div",{key:0,class:"descriptem","data-descriptem":r.value.id,title:r.value.text},[c(Ce,{type:"descriptem",class:"descriptem-header",data:e.descriptemId},{default:S(()=>[c(ge,{ref:"handle",class:"descriptem-handle",size:"xs",onClick:[ye(y,["meta"]),f],name:"mdi-format-quote-close-outline"},null,512),k("span",null,[k("span",Ma,L(r.value.text),1),c(nt,{title:"Select the appropriate text fragment",buttons:"",modelValue:l.value,"onUpdate:modelValue":V[0]||(V[0]=z=>l.value=z)},{default:S(z=>[c(Va,{modelValue:z.value,"onUpdate:modelValue":h=>z.value=h,initial:z.initialValue},null,8,["modelValue","onUpdate:modelValue","initial"])]),_:1},8,["modelValue"])]),c(Re),e.withContext?(u(),I("div",Aa,[d.value.property?(u(),I("span",Ta,[c(ge,{size:"xs",name:"mdi-note-text-outline"}),k("div",za,L(d.value.property.name),1),k("div",Oa,L(d.value.property.value),1)])):j("",!0),d.value.categoryinstance?(u(),I("span",ja,[c(ge,{size:"xs",name:"mdi-tag-outline"}),k("span",Da,L(d.value.categoryinstance.name),1)])):j("",!0),d.value.moment?(u(),I("span",{key:2,class:"context-item",onClick:V[1]||(V[1]=ye(z=>v(d.value.moment.id),["stop"]))},[c(ge,{size:"xs",name:"mdi-alpha-m-box-outline"}),k("span",Ea,L(d.value.moment.name),1)])):j("",!0)])):j("",!0),e.withMenu?(u(),I("div",qa,[c(Re),c(Ne,{actions:b})])):j("",!0)]),_:1},8,["data"])],8,$a)):j("",!0)}}),Nt=ve(Ra,[["__scopeId","data-v-19c3fc78"]]),Na=["data-justification"],Fa={class:"justification-metadata"},Ba={class:"justification-name"},Pa={class:"justification-descriptems"},La=re({__name:"JustificationRepresentation",props:{justificationId:{type:String,default:""}},setup(e){const a=me(),t=e,n=g(()=>a.getJustification(t.justificationId));return(r,i)=>e.justificationId?(u(),I("div",{key:0,class:"justification","data-justification":e.justificationId},[k("div",Fa,[k("span",Ba,L(n.value?.name),1)]),k("ul",Pa,[(u(!0),I(Y,null,ee(n.value?.descriptems,s=>(u(),I("li",{key:s.id},[c(Nt,{descriptemId:s.id},null,8,["descriptemId"])]))),128))])],8,Na)):j("",!0)}}),wt=ve(La,[["__scopeId","data-v-811ce895"]]),xe=re({__name:"DropZone",props:{data:{type:String,default:""},types:{type:String,default:""}},emits:["annotation","descriptem","selection","color","categoryinstance","moment","property","specificsynchroniccategory","genericsynchroniccategory","categorymodel","momentmodel"],setup(e,{emit:a}){const t=a,n=e,r=g(()=>n.types.split(/ +/));function i(d){if(!r.value)return!0;if(!d.dataTransfer)return!1;const l=[...d.dataTransfer.types];for(const v of r.value)if(l.includes(v))return!0;return!1}function s(d){i(d)&&d.currentTarget&&d.currentTarget.classList.add("is_droppable")}function y(d){d.currentTarget&&d.currentTarget.classList.remove("is_droppable")}function f(d){y(d);const l=d.dataTransfer;if(l){for(const v of l.types)if(v.startsWith("upmt/")){const b=l.getData(v),x=v.replace("upmt/","");t(x,b,n.data)}}}return(d,l)=>(u(),I("div",{class:"dropzone",onDrop:l[0]||(l[0]=v=>f(v)),onDragover:l[1]||(l[1]=ye(v=>s(v),["prevent"])),onDragleave:l[2]||(l[2]=ye(v=>y(v),["prevent"])),onDragenter:l[3]||(l[3]=ye(()=>{},["prevent"]))},[vn(d.$slots,"default")],32))}}),Ga=["data-property","title"],Ha={class:"property-content",row:""},Ua={class:"property-name"},Qa={class:"property-value"},Ja={class:"property-justification"},Ka=re({__name:"PropertyRepresentation",props:{propertyId:{type:String,default:""}},setup(e){const a=me(),t=e,n=g(()=>a.getProperty(t.propertyId)),r=g({get:()=>n.value?n.value.value:"",set:d=>{a.updateProperty(t.propertyId,{value:d})}});function i(){window.property=n.value,console.log("Property",n.value?.toJSON())}function s(d){const l=a.getDescriptem(d);l&&a.addTextSelectionToProperty(l.toJSON(),t.propertyId)}function y(d){const l=a.getAnnotation(d);l&&a.addTextSelectionToProperty(l.toJSON(),t.propertyId)}function f(d){try{const l=JSON.parse(d);a.addTextSelectionToProperty(l,t.propertyId)}catch(l){console.log(`Cannot parse ${d}: ${l}`)}}return(d,l)=>n.value?(u(),I("div",{key:0,class:"property","data-property":e.propertyId,title:n.value.label},[c(xe,{types:"upmt/descriptem upmt/annotation upmt/selection",onAnnotation:y,onSelection:f,onDescriptem:s},{default:S(()=>[k("div",Ha,[c(ge,{ref:"handle",class:"property-handle",size:"xs",onClick:ye(i,["meta"]),name:"mdi-note-text-outline"},null,512),k("div",Ua,L(n.value.name),1),k("div",Qa,[J(L(r.value)+" ",1),c(nt,{style:{zoom:"var(--chart-zoom)"},modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=v=>r.value=v),"auto-save":""},{default:S(v=>[c(Ae,{modelValue:v.value,"onUpdate:modelValue":b=>v.value=b,onFocus:l[0]||(l[0]=b=>b.target.select()),dense:"",autofocus:"",counter:"",onKeyup:et(v.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:1},8,["modelValue"])])])]),_:1}),k("div",Ja,[n.value.justification?(u(),P(wt,{key:0,justificationId:n.value.justification.id},null,8,["justificationId"])):j("",!0)])],8,Ga)):j("",!0)}}),Wa=ve(Ka,[["__scopeId","data-v-4613515b"]]),Xa=["data-categoryinstance"],Za={class:"categoryinstance-metadata"},Ya={class:"categoryinstance-name"},ei={class:"categoryinstance-justification"},ti={class:"categoryinstance-properties"},ni=re({__name:"CategoryInstanceRepresentation",props:{categoryinstanceId:{type:String,default:""}},setup(e){const a=me(),t=e,n=g(()=>a.getCategoryInstance(t.categoryinstanceId));function r(){window.categoryinstance=n.value,console.log("Category instance",n.value?.toJSON())}function i(d){console.log("Dropped descriptem",d);const l=a.getDescriptem(d);l&&(a.addTextSelectionToCategoryInstance(l.toJSON(),t.categoryinstanceId),a.deleteDescriptem(d))}function s(d){const l=a.getAnnotation(d);l&&a.addTextSelectionToCategoryInstance(l.toJSON(),t.categoryinstanceId)}function y(d){try{const l=JSON.parse(d);a.addTextSelectionToCategoryInstance(l,t.categoryinstanceId)}catch(l){console.log(`Cannot parse ${d}: ${l}`)}}const f=[["Duplicate",()=>a.duplicateCategoryInstance(t.categoryinstanceId)],["Delete",()=>a.deleteCategoryInstance(t.categoryinstanceId)]];return(d,l)=>n.value?(u(),I("div",{key:0,class:de(["categoryinstance",`categoryinstance-${e.categoryinstanceId}`]),style:Te({backgroundColor:n.value.color}),"data-categoryinstance":e.categoryinstanceId},[k("div",Za,[c(xe,{types:"upmt/descriptem upmt/annotation upmt/selection",onAnnotation:s,onSelection:y,onDescriptem:i},{default:S(()=>[c(Ce,{class:"categoryinstance-header",type:"categoryinstance",data:e.categoryinstanceId},{default:S(()=>[c(ge,{ref:"handle",class:"categoryinstance-handle",size:"xs",onClick:ye(r,["meta"]),name:"mdi-tag-outline"},null,512),k("span",Ya,L(n.value.name),1),c(Re),c(Ne,{actions:f})]),_:1},8,["data"])]),_:1})]),k("div",ei,[c(wt,{justificationId:n.value.justification.id},null,8,["justificationId"])]),k("div",ti,[(u(!0),I(Y,null,ee(n.value.properties,v=>(u(),I("div",{key:v.id},[c(Wa,{propertyId:v.id},null,8,["propertyId"])]))),128))])],14,Xa)):j("",!0)}}),oi=ve(ni,[["__scopeId","data-v-10d6fe93"]]),ai=["data-specificsynchroniccategory"],ii=["data-specificsynchroniccategory"],li={class:"specificsynchroniccategory-children"},ri={class:"specificsynchroniccategory-relation"},si={class:"specificsynchroniccategory-header"},ci={class:"specificsynchroniccategory-name"},ui={key:0,class:"specificsynchroniccategory-filler"},di=re({__name:"SpecificSynchronicCategoryOverview",props:{categoryId:{type:String,default:""},layout:{type:String,default:"vertical"}},setup(e){const a=me(),t=e,n=g(()=>a.getSpecificSynchronicCategory(t.categoryId));return(r,i)=>{const s=It("SpecificSynchronicCategoryOverview",!0);return u(),I("div",{ref:"container",class:de(["specificsynchroniccategory-container",`specificsynchroniccategory-${e.categoryId}`]),"data-specificsynchroniccategory":e.categoryId},[n.value?(u(),I("div",{key:0,class:"specificsynchroniccategory",style:Te({backgroundColor:n.value.color}),"data-specificsynchroniccategory":e.categoryId},[k("div",li,[(u(!0),I(Y,null,ee(n.value.children,y=>(u(),I("div",{key:y.id},[c(s,{categoryId:y.id},null,8,["categoryId"])]))),128))]),k("div",ri,[c(qe,{type:n.value.abstractionType,childrenCount:n.value.children.length},null,8,["type","childrenCount"])]),k("div",si,[c(Ce,{type:"genericsynchroniccategory",data:n.value.name},{default:S(()=>[k("span",ci,L(n.value.name),1)]),_:1},8,["data"])]),n.value.parentId?(u(),I("div",ui,[c(qe,{childrenCount:1})])):j("",!0)],12,ii)):j("",!0)],10,ai)}}}),fi=ve(di,[["__scopeId","data-v-dd492f66"]]),mi=["data-specificsynchronicmodel"],vi={class:"specificsynchronicmodel-categories"},pi=re({__name:"SpecificSynchronicModelOverview",props:{modelId:{type:String,default:null}},setup(e){const a=me(),t=e,n=g(()=>a.getSpecificSynchronicModel(t.modelId));return(r,i)=>n.value?(u(),I("div",{key:0,class:"specificsynchronicmodel-overview","data-specificsynchronicmodel":e.modelId},[k("div",vi,[(u(!0),I(Y,null,ee(n.value.categories,s=>(u(),P(fi,{key:s.id,categoryId:s.id},null,8,["categoryId"]))),128))])],8,mi)):j("",!0)}}),gi=["data-moment"],yi=["data-moment"],hi={class:"moment-name"},Si={class:"element-toolbar on-name-hover"},Ii={class:"moment-justification"},wi={class:de(["moment-children","horizontal"])},bi=re({__name:"MomentRepresentation",props:{momentId:{type:String,default:""},layout:{type:String,default:"vertical"}},setup(e){const a=ke(),t=me(),n=e,{highlightedMomentId:r,editedSpecificSynchronicModelId:i}=Fe(a),s=g(()=>t.getMoment(n.momentId)),y=g(()=>s.value?.specificsynchronicmodel?.id===i.value);function f(){window.moment=s.value,console.log("Moment",s.value)}function d(){r.value&&(r.value="")}function l(){s.value&&!s.value.isExpanded&&t.updateMoment(n.momentId,{isExpanded:!0})}function v(R,O){console.log("droppedCategoryInstance",R,n.momentId,O),t.getCategoryInstance(R)&&(t.momentMoveCategoryInstance(R,n.momentId),l())}function b(R){t.momentAddCategoryModel(R,n.momentId),l()}function x(R){const O=t.getDescriptem(R);O&&(t.addTextSelectionToMoment(O.toJSON(),n.momentId),t.deleteDescriptem(R),l())}function V(R){const O=t.getAnnotation(R);O&&(t.addTextSelectionToMoment(O.toJSON(),n.momentId),l())}function z(R){try{const O=JSON.parse(R);t.addTextSelectionToMoment(O,n.momentId),l()}catch(O){console.log(`Cannot parse ${R}: ${O}`)}}function h(R,O){console.log("Dropped Moment",R,"where",O),R?(t.moveMoment(R,n.momentId,O),l()):(t.addMoment(a.newMomentId(),n.momentId,O),l())}function m(R){t.updateMoment(n.momentId,{color:R})}function C(R,O){const G=t.getDescriptem(R);G&&s.value&&(t.addMoment(a.newMomentId(),n.momentId,O,G.toJSON()),l())}function E(R,O){const G=t.getAnnotation(R);G&&s.value&&(t.addMoment(a.newMomentId(),n.momentId,O,G.toJSON()),l())}function w(R,O){try{const G=JSON.parse(R);s.value&&(t.addMoment(a.newMomentId(),n.momentId,O,G),l())}catch(G){console.log(`Cannot parse ${R}: ${G}`)}}const T=g({get(){return s.value?s.value.isExpanded:!0},set(R){t.updateMoment(n.momentId,{isExpanded:R})}}),_=g({get(){return s.value?s.value.name:""},set(R){t.updateMoment(n.momentId,{name:R})}}),F=g({get(){return s.value?s.value.color:""},set(R){t.updateMoment(n.momentId,{color:R})}});function q(){s.value&&t.updateMoment(n.momentId,{isTransitional:!s.value.isTransitional})}function Z(R){a.setEditedSpecificSynchronicModelId(R)}const we=[["Toggle transitional",q],["Delete",()=>t.deleteMoment(n.momentId)]];return(R,O)=>(u(),I("div",{ref:"container",class:de(["moment-container",`moment-${e.momentId}`,{highlighted:e.momentId===tt(r)}]),"data-moment":e.momentId},[c(xe,{data:"before",class:"empty_padding",types:"upmt/moment upmt/selection upmt/descriptem upmt/annotation",onMoment:h,onAnnotation:E,onSelection:w,onDescriptem:C},{default:S(()=>[c(ie,{flat:"",dense:"",size:"xs",class:"new-moment-button",icon:"mdi-plus",onClick:O[0]||(O[0]=G=>w("{}","before"))},{default:S(()=>[c(Ie,null,{default:S(()=>[...O[7]||(O[7]=[J("Create a new moment here",-1)])]),_:1})]),_:1})]),_:1}),s.value?(u(),I("div",{key:0,class:de(["moment",{transitional:s.value.isTransitional}]),style:Te({backgroundColor:s.value.color}),"data-moment":s.value.id},[c(Et,{class:"moment-body pa-md-xs",dense:"","dense-toggle":"",duration:0,"expand-icon-toggle":"","switch-toggle-side":"",modelValue:T.value,"onUpdate:modelValue":O[5]||(O[5]=G=>T.value=G),"header-class":"header-class q-pa-xs","expand-icon-class":"icon-class q-pa-xs",title:s.value.note},{header:S(()=>[c(xe,{data:"header",types:"upmt/categorymodel upmt/categoryinstance upmt/descriptem upmt/annotation upmt/selection upmt/color",class:"row full-width justify-center moment-header q-pa-xs",onCategoryinstance:v,onCategorymodel:b,onAnnotation:V,onSelection:z,onDescriptem:x,onColor:m},{default:S(()=>[c(Ce,{type:"moment",data:e.momentId,onClick:ye(f,["meta"])},{default:S(()=>[c(ge,{size:"xs",onClick:d,name:"mdi-alpha-m-box-outline"}),k("span",hi,[J(L(_.value)+" ",1),c(nt,{style:{zoom:"var(--chart-zoom)"},modelValue:_.value,"onUpdate:modelValue":O[2]||(O[2]=G=>_.value=G),"auto-save":""},{default:S(G=>[c(Ae,{modelValue:G.value,"onUpdate:modelValue":N=>G.value=N,onFocus:O[1]||(O[1]=N=>N.target.select()),dense:"",autofocus:"",counter:"",onKeyup:et(G.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:1},8,["modelValue"])])]),_:1},8,["data"]),k("div",Si,[c(In,{class:"on-name-hover",modelValue:F.value,"onUpdate:modelValue":O[3]||(O[3]=G=>F.value=G)},null,8,["modelValue"]),c(qt,{element:s.value},null,8,["element"]),c(Ne,{actions:we})])]),_:1})]),default:S(()=>[k("div",Ii,[s.value?(u(),P(wt,{key:0,justificationId:s.value.justification?.id??""},null,8,["justificationId"])):j("",!0)]),s.value?(u(),P(ie,{key:0,flat:"",dense:"",size:"xs",title:"Edit specific synchronic model",class:"absolute-bottom-right",onClick:O[4]||(O[4]=G=>Z(s.value.specificsynchronicmodel?.id||"")),icon:"edit","no-caps":""})):j("",!0),k("div",{class:de(["moment-synchronic-specific-model flex row",{"moment-synchronic-specific-model-edited":y.value}])},[c(pi,{modelId:s.value?.specificsynchronicmodel?.id??""},null,8,["modelId"])],2),k("div",{class:de(["moment-categoryinstances",e.layout])},[(u(!0),I(Y,null,ee(s.value.categoryinstances,G=>(u(),I("div",{key:G.id},[c(oi,{categoryinstanceId:G.id},null,8,["categoryinstanceId"])]))),128))],2)]),_:1},8,["modelValue","title"]),k("div",wi,[(u(!0),I(Y,null,ee(s.value.children,G=>(u(),I("div",{key:G.id},[c(Vn,{momentId:G.id},null,8,["momentId"])]))),128))]),c(xe,{data:`in:${e.momentId}`,class:"empty_padding",types:"upmt/moment upmt/selection upmt/descriptem upmt/annotation",onMoment:h,onAnnotation:E,onSelection:w,onDescriptem:C},null,8,["data"])],14,yi)):j("",!0),c(xe,{data:"after",class:"empty_padding",types:"upmt/moment upmt/selection upmt/descriptem upmt/annotation",onMoment:h,onAnnotation:E,onSelection:w,onDescriptem:C},{default:S(()=>[c(ie,{flat:"",dense:"",size:"xs",class:"new-moment-button",icon:"mdi-plus",onClick:O[6]||(O[6]=G=>w("{}","after"))},{default:S(()=>[c(Ie,null,{default:S(()=>[...O[8]||(O[8]=[J("Create a new moment here",-1)])]),_:1})]),_:1})]),_:1})],10,gi))}}),Vn=ve(bi,[["__scopeId","data-v-a041fbee"]]),Ci=["data-moment"],_i={class:"analysis-content moment-children"},xi=re({__name:"AnalysisRepresentation",props:{analysisId:{type:String,default:""}},setup(e){const a=me(),t=ke(),n=e,{highlightedMomentId:r}=Fe(t),i=g(()=>a.getAnalysis(n.analysisId));return pe(r,()=>{if(r.value){const s=document.querySelector(`[data-moment="${r.value}"]`);s&&s.scrollIntoView()}}),(s,y)=>i.value?(u(),I("div",{key:0,class:"analysis","data-moment":e.analysisId},[k("div",_i,[(u(!0),I(Y,null,ee(i.value.rootMoment.children,f=>(u(),I("div",{key:f.id},[c(Vn,{momentId:f.id},null,8,["momentId"])]))),128))])],8,Ci)):j("",!0)}}),ki=ve(xi,[["__scopeId","data-v-f9657ebb"]]),Vi=["data-interview"],$i={class:"q-pa-no col-2 q-mx-md"},Mi={class:"col-2 q-mx-md q-pa-no"},Ai=re({__name:"InterviewRepresentation",props:{interviewId:{type:String,default:""}},setup(e){const a=ke(),t=me(),n=e,r=g(()=>t.getInterview(n.interviewId)),i=D(null),s=sn("--chart-zoom",i),y=sn("--moment-minimum-width",i),f=g({get:()=>parseFloat(y.value),set:h=>{y.value=`${h}px`}}),d=g({get:()=>Number(s.value),set:h=>{s.value=h}});function l(){t.getRepo().Moment.where("interviewId",n.interviewId).update({isExpanded:!0})}function v(){t.getRepo().Moment.where("interviewId",n.interviewId).update({isExpanded:!1})}function b(){if(r.value){const h=t.getAnalysis(r.value.analysis.id);if(h){const m=h.rootMoment.children;if(m.length){const C=m[m.length-1];C&&t.addMoment(a.newMomentId(),C.id,"after")}}}}function x(h){const m=document.querySelector(".analysis");if(m){const C=m.closest(".q-splitter");if(C){const w=(C.clientWidth-60)/h;d.value=+w.toFixed(2)}}}function V(){const h=document.querySelector(".analysis");h&&x(h.clientWidth)}function z(){d.value=1}return(h,m)=>r.value?(u(),I("div",{key:0,class:"interview flex column","data-interview":e.interviewId},[c(Rt,{class:"interview-toolbar row"},{default:S(()=>[c(Ce,{type:"moment",data:""},{default:S(()=>[c(ie,{size:"sm",onClick:b},{default:S(()=>[m[3]||(m[3]=J(" New moment ",-1)),c(Ie,{anchor:"top middle",offset:[0,30]},{default:S(()=>[...m[2]||(m[2]=[J("Drag this button to create a new moment>",-1)])]),_:1})]),_:1})]),_:1}),c(ie,{icon:"mdi-arrow-expand-down",size:"sm",onClick:l},{default:S(()=>[c(Ie,{anchor:"top middle",offset:[0,30]},{default:S(()=>[...m[4]||(m[4]=[J(" Expand all moments ",-1)])]),_:1})]),_:1}),c(ie,{icon:"mdi-arrow-expand-up",size:"sm",onClick:v},{default:S(()=>[c(Ie,{anchor:"top middle",offset:[0,30]},{default:S(()=>[...m[5]||(m[5]=[J(" Close all moments ",-1)])]),_:1})]),_:1}),c(ie,{icon:"mdi-fit-to-page-outline",size:"sm",onClick:V},{default:S(()=>[c(Ie,{anchor:"top middle",offset:[0,30]},{default:S(()=>[...m[6]||(m[6]=[J(" Fit whole analysis ",-1)])]),_:1})]),_:1}),k("div",$i,[c(Ot,{color:"info"},{default:S(()=>[J(" Zoom: "+L(d.value),1)]),_:1}),c(nn,{modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=C=>d.value=C),min:.1,max:4,step:.1},null,8,["modelValue"])]),c(ie,{icon:"mdi-numeric-1-box-outline",size:"sm",onClick:z},{default:S(()=>[c(Ie,{anchor:"top middle",offset:[0,30]},{default:S(()=>[...m[7]||(m[7]=[J(" Reset zoom to original level ",-1)])]),_:1})]),_:1}),k("div",Mi,[c(Ot,{color:"info"},{default:S(()=>[J(" Moment width: "+L(f.value),1)]),_:1}),c(nn,{modelValue:f.value,"onUpdate:modelValue":m[1]||(m[1]=C=>f.value=C),min:50,max:500,step:10},null,8,["modelValue"])]),c(Re)]),_:1}),r.value.analysis?(u(),P(ki,{key:0,ref:"analysis",class:"scrollable analysis",analysisId:r.value.analysis.id},null,8,["analysisId"])):j("",!0)],8,Vi)):j("",!0)}}),Ti={key:0},zi={key:1},Oi={class:"row"},ji={class:"row items-center all-pointer-events"},$n=re({__name:"InterviewMetadataForm",props:{interview:{type:io,required:!1}},emits:["validate","cancel"],setup(e,{emit:a}){const t=e,n=a,r=bn(),i=D(null),s=D(null),y=D(t.interview?.name??""),f=D(t.interview?.participantName??""),d=D(t.interview?.date??""),l=D(t.interview?.note??""),v=D(t.interview?.text??""),b=g(()=>y.value&&f.value&&v.value);function x(h){h.target&&n("validate",{name:y.value,participantName:f.value,note:l.value,date:d.value,text:t.interview?t.interview.text:v.value})}function V(){f.value="",y.value="",d.value="",v.value="",l.value="",s.value=null,n("cancel")}function z(h){const m=new FileReader;m.onload=()=>{v.value=m.result},m.onerror=()=>{console.error("Error reading file:",m.error),r.notify({type:"error",message:`Error reading file: ${m.error?.message}`})},m.readAsText(h)}return(h,m)=>(u(),P(lo,null,{default:S(()=>[e.interview?(u(),I("div",Ti,[c(en,{class:"bg-secondary text-white text-h5"},{default:S(()=>[J(" Editing "+L(e.interview.name),1)]),_:1}),m[7]||(m[7]=k("p",null,"Mandatory information is marked with *",-1))])):(u(),I("div",zi,[c(en,{class:"bg-secondary text-white text-h5"},{default:S(()=>[...m[8]||(m[8]=[J(" Create a new interview ",-1)])]),_:1}),m[9]||(m[9]=k("p",null,"Please provide the following information to create a new interview. Mandatory information is marked with *",-1))])),c(Oo,{name:"interviewForm",onSubmit:x,class:"q-gutter-md"},{default:S(()=>[k("div",null,[c(ie,{label:e.interview?"Validate":"Create",type:"submit",disabled:!b.value,color:"primary"},null,8,["label","disabled"]),c(ie,{label:"Cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:V})]),k("div",Oi,[c(Ae,{filled:"",modelValue:y.value,"onUpdate:modelValue":m[0]||(m[0]=C=>y.value=C),label:"Interview name/id *","lazy-rules":"",class:"col-4",rules:[C=>C&&C.length>0||"It  must be filled"]},null,8,["modelValue","rules"]),c(Ae,{filled:"",modelValue:f.value,"onUpdate:modelValue":m[1]||(m[1]=C=>f.value=C),label:"Participant name","lazy-rules":"",class:"col-4 q-px-md"},null,8,["modelValue"]),c(Ae,{filled:"",type:"date",modelValue:d.value,"onUpdate:modelValue":m[2]||(m[2]=C=>d.value=C),label:"Interview date","lazy-rules":"",class:"col-4 q-px-md"},null,8,["modelValue"])]),c(Ae,{filled:"",autogrow:"",type:"text",modelValue:l.value,"onUpdate:modelValue":m[3]||(m[3]=C=>l.value=C),label:"Note"},null,8,["modelValue"]),e.interview?j("",!0):(u(),P(Ae,{key:0,filled:"","label-slot":"",autogrow:"",counter:"","input-style":{minHeight:"4em",maxHeight:"30em"},hint:"Please provide the interview text by pasting it here, uploading a file with the upload button or by dragging it here.",type:"textarea",modelValue:v.value,"onUpdate:modelValue":m[6]||(m[6]=C=>v.value=C),label:"Interview text *"},{label:S(()=>[k("div",ji,[m[10]||(m[10]=J(" Paste interview text here or ",-1)),c(tt(Ao),{label:"drag an existing text file here",modelValue:s.value,"onUpdate:modelValue":[m[5]||(m[5]=C=>s.value=C),z],ref_key:"filepicker",ref:i,outlined:"","hide-bottom-space":"",square:"",dense:"","item-aligned":""},{prepend:S(()=>[c(ge,{name:"mdi-upload-circle-outline",onClick:m[4]||(m[4]=ye(()=>{},["stop","prevent"]))})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"]))]),_:1})]),_:1}))}}),Di={key:0,class:"textAnnotationContainer"},Ei={class:"extract"},qi={class:"extract"},Ri=re({__name:"TextAnnotation",props:{interviewId:{type:String,default:null}},setup(e){const a=e,t=me(),n=ke(),r=D(!1),i=D(!1),s=D([]),y=D([]),f=D(null),d=D(""),{highlightedDescriptemId:l}=Fe(n),v=g(()=>t.getInterview(a.interviewId));function b(_){i.value=!1,v.value&&t.updateElement(v.value,{name:_.name,participantName:_.participantName,date:_.date,note:_.note})}const x=_=>`category${{"#7084b0":"2","#7bcf7b":"4","#ff9797":"1","#ffdc97":"3"}[_.color]??"9"}`,V=g(()=>{const _=a.interviewId,F=t.getInterviewAnnotations(_).map(Z=>({interviewId:Z.interviewId,id:Z.id,start:Z.startIndex,length:Z.endIndex-Z.startIndex,color:Z.color,class:x(Z)})),q=t.getInterviewDescriptems(_).map(Z=>({interviewId:Z.interviewId,id:Z.id,start:Z.startIndex,length:Z.endIndex-Z.startIndex,color:null,class:"descriptem"}));return[...F,...q]}),z=g(()=>{if(f.value){const _=(v.value?.text??"").slice(f.value.startIndex,f.value.endIndex);return ro(_)}else return""});function h(_){const F=_.annotations.map(Z=>Z.class),q=F.filter(Z=>Z==="descriptem").length;return q>=2&&(F.push("descriptems"),F.push(`descriptems${q}`)),[...new Set(F)].join(" ")}const m={mouseover:(_,F)=>{y.value=F.filter(q=>q.class==="descriptem").map(q=>t.getDescriptem(q.id)),s.value=F.filter(q=>q.class!=="descriptem").map(q=>t.getAnnotation(q.id))}},C=g(()=>f.value?JSON.stringify(f.value):"{}");function E(_){v.value&&(f.value={startIndex:_.begin,endIndex:_.end,interviewId:a.interviewId,text:v.value.fragment(_.begin,_.end)},d.value&&t.addAnnotation(f.value,d.value))}function w(_){_.dataTransfer&&_.dataTransfer.setData("upmt/selection",C.value)}function T(_){t.deleteAnnotation(_)}return pe(l,()=>{if(l.value){document.querySelectorAll("[data-annotation-ids].highlighted").forEach(F=>F.classList.remove("highlighted"));const _=document.querySelectorAll(`[data-annotation-ids*="${l.value}"]`);_.forEach(F=>F.classList.add("highlighted")),_.length&&_[0]&&_[0].scrollIntoView({block:"center",behavior:"smooth"})}else document.querySelectorAll("[data-annotation-ids].highlighted").forEach(_=>_.classList.remove("highlighted"))}),(_,F)=>v.value?(u(),I("div",Di,[c(Rt,{class:"row justify-end absolute-top bg-white"},{default:S(()=>[c(qt,{element:v.value},null,8,["element"]),c(ie,{flat:"",size:"sm",dense:"",title:"Edit metadata",onClick:F[0]||(F[0]=q=>i.value=!i.value),icon:"edit"}),c(Re),c(ie,{size:"sm",icon:"mdi-cursor-text",onClick:F[1]||(F[1]=q=>d.value=""),flat:d.value!="",dense:""},null,8,["flat"]),(u(!0),I(Y,null,ee(tt(ea),q=>(u(),P(ie,{size:"sm",key:q,icon:"mdi-marker",onClick:Z=>d.value=q,flat:q!=d.value,dense:"",style:Te({color:q})},null,8,["onClick","flat","style"]))),128))]),_:1}),i.value?(u(),P($n,{key:0,interview:v.value,onCancel:F[2]||(F[2]=q=>i.value=!1),onValidate:b},null,8,["interview"])):j("",!0),v.value?(u(),P(kn,{key:1,class:"textAnnotationComponent q-pt-lg q-pa-md",text:v.value.text,annotations:V.value,getSpanClasses:h,spanEvents:m,onDragstart:F[4]||(F[4]=q=>w(q)),onSelection:E},{default:S(()=>[c(ut,{"touch-position":"","context-menu":"",modelValue:r.value,"onUpdate:modelValue":F[3]||(F[3]=q=>r.value=q)},{default:S(()=>[c(wn,{dense:"",style:{"min-width":"100px"}},{default:S(()=>[z.value?yt((u(),P(Ze,{key:"current",clickable:""},{default:S(()=>[c(Ce,{type:"selection",data:C.value},{default:S(()=>[c(ge,{size:"xs",name:"mdi-select"}),k("span",Ei,L(z.value),1)]),_:1},8,["data"])]),_:1})),[[ht]]):j("",!0),(u(!0),I(Y,null,ee(y.value,q=>yt((u(),P(Ze,{key:q.id,clickable:"",row:""},{default:S(()=>[c(Nt,{class:"full-width",descriptemId:q.id,withContext:"",withMenu:!1},null,8,["descriptemId"])]),_:2},1024)),[[ht]])),128)),c(pn),(u(!0),I(Y,null,ee(s.value,q=>yt((u(),P(Ze,{key:q.id,clickable:""},{default:S(()=>[c(Ce,{type:"annotation",data:q.id},{default:S(()=>[c(ge,{size:"xs",style:Te({backgroundColor:q.color}),name:"mdi-comment-quote-outline"},null,8,["style"]),k("span",qi,L(q.shorttext),1)]),_:2},1032,["data"]),c(Re),c(ie,{size:"xs",flat:"",dense:"",icon:"mdi-delete-outline",onClick:Z=>T(q.id)},null,8,["onClick"])]),_:2},1024)),[[ht]])),128))]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["text","annotations"])):j("",!0)])):j("",!0)}}),Ni=ve(Ri,[["__scopeId","data-v-1443854a"]]),Fi=ot({name:"QField",inheritAttrs:!1,props:{...Dt,tag:{type:String,default:"label"}},emits:gn,setup(){return yn(hn({tagProp:!0}))}}),be=1e3,Bi=["start","center","end","start-force","center-force","end-force"],Mn=Array.prototype.filter,Pi=window.getComputedStyle(document.body).overflowAnchor===void 0?so:function(e,a){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const t=e.children||[];Mn.call(t,r=>r.dataset&&r.dataset.qVsAnchor!==void 0).forEach(r=>{delete r.dataset.qVsAnchor});const n=t[a];n?.dataset&&(n.dataset.qVsAnchor="")}))};function Ye(e,a){return e+a}function At(e,a,t,n,r,i,s,y){const f=e===window?document.scrollingElement||document.documentElement:e,d=r===!0?"offsetWidth":"offsetHeight",l={scrollStart:0,scrollViewSize:-s-y,scrollMaxSize:0,offsetStart:-s,offsetEnd:-y};if(r===!0?(e===window?(l.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l.scrollViewSize+=document.documentElement.clientWidth):(l.scrollStart=f.scrollLeft,l.scrollViewSize+=f.clientWidth),l.scrollMaxSize=f.scrollWidth,i===!0&&(l.scrollStart=(zt===!0?l.scrollMaxSize-l.scrollViewSize:0)-l.scrollStart)):(e===window?(l.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,l.scrollViewSize+=document.documentElement.clientHeight):(l.scrollStart=f.scrollTop,l.scrollViewSize+=f.clientHeight),l.scrollMaxSize=f.scrollHeight),t!==null)for(let v=t.previousElementSibling;v!==null;v=v.previousElementSibling)v.classList.contains("q-virtual-scroll--skip")===!1&&(l.offsetStart+=v[d]);if(n!==null)for(let v=n.nextElementSibling;v!==null;v=v.nextElementSibling)v.classList.contains("q-virtual-scroll--skip")===!1&&(l.offsetEnd+=v[d]);if(a!==e){const v=f.getBoundingClientRect(),b=a.getBoundingClientRect();r===!0?(l.offsetStart+=b.left-v.left,l.offsetEnd-=b.width):(l.offsetStart+=b.top-v.top,l.offsetEnd-=b.height),e!==window&&(l.offsetStart+=l.scrollStart),l.offsetEnd+=l.scrollMaxSize-l.offsetStart}return l}function un(e,a,t,n){a==="end"&&(a=(e===window?document.body:e)[t===!0?"scrollWidth":"scrollHeight"]),e===window?t===!0?(n===!0&&(a=(zt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-a),window.scrollTo(a,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,a):t===!0?(n===!0&&(a=(zt===!0?e.scrollWidth-e.offsetWidth:0)-a),e.scrollLeft=a):e.scrollTop=a}function ct(e,a,t,n){if(t>=n)return 0;const r=a.length,i=Math.floor(t/be),s=Math.floor((n-1)/be)+1;let y=e.slice(i,s).reduce(Ye,0);return t%be!==0&&(y-=a.slice(i*be,t).reduce(Ye,0)),n%be!==0&&n!==r&&(y-=a.slice(n,s*be).reduce(Ye,0)),y}const Li={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},dn={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Li};function Gi({virtualScrollLength:e,getVirtualScrollTarget:a,getVirtualScrollEl:t,virtualScrollItemSizeComputed:n}){const r=St(),{props:i,emit:s,proxy:y}=r,{$q:f}=y;let d,l,v,b=[],x;const V=D(0),z=D(0),h=D({}),m=D(null),C=D(null),E=D(null),w=D({from:0,to:0}),T=g(()=>i.tableColspan!==void 0?i.tableColspan:100);n===void 0&&(n=g(()=>i.virtualScrollItemSize));const _=g(()=>n.value+";"+i.virtualScrollHorizontal),F=g(()=>_.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);pe(F,()=>{le()}),pe(_,q);function q(){B(l,!0)}function Z(p){B(p===void 0?l:p)}function we(p,A){const U=a();if(U==null||U.nodeType===8)return;const ae=At(U,t(),m.value,C.value,i.virtualScrollHorizontal,f.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);v!==ae.scrollViewSize&&le(ae.scrollViewSize),O(U,ae,Math.min(e.value-1,Math.max(0,parseInt(p,10)||0)),0,Bi.indexOf(A)!==-1?A:l!==-1&&p>l?"end":"start")}function R(){const p=a();if(p==null||p.nodeType===8)return;const A=At(p,t(),m.value,C.value,i.virtualScrollHorizontal,f.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),U=e.value-1,ae=A.scrollMaxSize-A.offsetStart-A.offsetEnd-z.value;if(d===A.scrollStart)return;if(A.scrollMaxSize<=0){O(p,A,0,0);return}v!==A.scrollViewSize&&le(A.scrollViewSize),G(w.value.from);const ce=Math.floor(A.scrollMaxSize-Math.max(A.scrollViewSize,A.offsetEnd)-Math.min(x[U],A.scrollViewSize/2));if(ce>0&&Math.ceil(A.scrollStart)>=ce){O(p,A,U,A.scrollMaxSize-A.offsetEnd-b.reduce(Ye,0));return}let X=0,K=A.scrollStart-A.offsetStart,ue=K;if(K<=ae&&K+A.scrollViewSize>=V.value)K-=V.value,X=w.value.from,ue=K;else for(let Q=0;K>=b[Q]&&X<U;Q++)K-=b[Q],X+=be;for(;K>0&&X<U;)K-=x[X],K>-A.scrollViewSize?(X++,ue=K):ue=x[X]+K;O(p,A,X,ue)}function O(p,A,U,ae,ce){const X=typeof ce=="string"&&ce.indexOf("-force")!==-1,K=X===!0?ce.replace("-force",""):ce,ue=K!==void 0?K:"start";let Q=Math.max(0,U-h.value[ue]),he=Q+h.value.total;he>e.value&&(he=e.value,Q=Math.max(0,he-h.value.total)),d=A.scrollStart;const ze=Q!==w.value.from||he!==w.value.to;if(ze===!1&&K===void 0){Ve(U);return}const{activeElement:dt}=document,$e=E.value;ze===!0&&$e!==null&&$e!==dt&&$e.contains(dt)===!0&&($e.addEventListener("focusout",N),setTimeout(()=>{$e?.removeEventListener("focusout",N)})),Pi($e,U-Q);const ft=K!==void 0?x.slice(Q,U).reduce(Ye,0):0;if(ze===!0){const Oe=he>=w.value.from&&Q<=w.value.to?w.value.to:he;w.value={from:Q,to:Oe},V.value=ct(b,x,0,Q),z.value=ct(b,x,he,e.value),requestAnimationFrame(()=>{w.value.to!==he&&d===A.scrollStart&&(w.value={from:w.value.from,to:he},z.value=ct(b,x,he,e.value))})}requestAnimationFrame(()=>{if(d!==A.scrollStart)return;ze===!0&&G(Q);const Oe=x.slice(Q,U).reduce(Ye,0),je=Oe+A.offsetStart+V.value,mt=je+x[U];let it=je+ae;if(K!==void 0){const bt=Oe-ft,lt=A.scrollStart+bt;it=X!==!0&&lt<je&&mt<lt+A.scrollViewSize?lt:K==="end"?mt-A.scrollViewSize:je-(K==="start"?0:Math.round((A.scrollViewSize-x[U])/2))}d=it,un(p,it,i.virtualScrollHorizontal,f.lang.rtl),Ve(U)})}function G(p){const A=E.value;if(A){const U=Mn.call(A.children,Q=>Q.classList&&Q.classList.contains("q-virtual-scroll--skip")===!1),ae=U.length,ce=i.virtualScrollHorizontal===!0?Q=>Q.getBoundingClientRect().width:Q=>Q.offsetHeight;let X=p,K,ue;for(let Q=0;Q<ae;){for(K=ce(U[Q]),Q++;Q<ae&&U[Q].classList.contains("q-virtual-scroll--with-prev")===!0;)K+=ce(U[Q]),Q++;ue=K-x[X],ue!==0&&(x[X]+=ue,b[Math.floor(X/be)]+=ue),X++}}}function N(){E.value?.focus()}function B(p,A){const U=1*n.value;(A===!0||Array.isArray(x)===!1)&&(x=[]);const ae=x.length;x.length=e.value;for(let X=e.value-1;X>=ae;X--)x[X]=U;const ce=Math.floor((e.value-1)/be);b=[];for(let X=0;X<=ce;X++){let K=0;const ue=Math.min((X+1)*be,e.value);for(let Q=X*be;Q<ue;Q++)K+=x[Q];b.push(K)}l=-1,d=void 0,V.value=ct(b,x,0,w.value.from),z.value=ct(b,x,w.value.to,e.value),p>=0?(G(w.value.from),Me(()=>{we(p)})):Be()}function le(p){if(p===void 0&&typeof window<"u"){const K=a();K!=null&&K.nodeType!==8&&(p=At(K,t(),m.value,C.value,i.virtualScrollHorizontal,f.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}v=p;const A=parseFloat(i.virtualScrollSliceRatioBefore)||0,U=parseFloat(i.virtualScrollSliceRatioAfter)||0,ae=1+A+U,ce=p===void 0||p<=0?1:Math.ceil(p/n.value),X=Math.max(1,ce,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/ae));h.value={total:Math.ceil(X*ae),start:Math.ceil(X*A),center:Math.ceil(X*(.5+A)),end:Math.ceil(X*(1+A)),view:ce}}function ne(p,A){const U=i.virtualScrollHorizontal===!0?"width":"height",ae={["--q-virtual-scroll-item-"+U]:n.value+"px"};return[p==="tbody"?W(p,{class:"q-virtual-scroll__padding",key:"before",ref:m},[W("tr",[W("td",{style:{[U]:`${V.value}px`,...ae},colspan:T.value})])]):W(p,{class:"q-virtual-scroll__padding",key:"before",ref:m,style:{[U]:`${V.value}px`,...ae}}),W(p,{class:"q-virtual-scroll__content",key:"content",ref:E,tabindex:-1},A.flat()),p==="tbody"?W(p,{class:"q-virtual-scroll__padding",key:"after",ref:C},[W("tr",[W("td",{style:{[U]:`${z.value}px`,...ae},colspan:T.value})])]):W(p,{class:"q-virtual-scroll__padding",key:"after",ref:C,style:{[U]:`${z.value}px`,...ae}})]}function Ve(p){l!==p&&(i.onVirtualScroll!==void 0&&s("virtualScroll",{index:p,from:w.value.from,to:w.value.to-1,direction:p<l?"decrease":"increase",ref:y}),l=p)}le();const Be=co(R,f.platform.is.ios===!0?120:35);uo(()=>{le()});let at=!1;return fo(()=>{at=!0}),mo(()=>{if(at!==!0)return;const p=a();d!==void 0&&p!==void 0&&p!==null&&p.nodeType!==8?un(p,d,i.virtualScrollHorizontal,f.lang.rtl):we(l)}),Sn(()=>{Be.cancel()}),Object.assign(y,{scrollTo:we,reset:q,refresh:Z}),{virtualScrollSliceRange:w,virtualScrollSliceSizeComputed:h,setVirtualScrollSize:le,onVirtualScrollEvt:Be,localResetVirtualScroll:B,padVirtualScroll:ne,scrollTo:we,reset:q,refresh:Z}}const fn=e=>["add","add-unique","toggle"].includes(e),Hi=".*+?^${}()|[]\\",Ui=Object.keys(Dt);function Tt(e,a){if(typeof e=="function")return e;const t=e!==void 0?e:a;return n=>n!==null&&typeof n=="object"&&t in n?n[t]:n}const Qi=ot({name:"QSelect",inheritAttrs:!1,props:{...dn,...vo,...Dt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:fn},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:dn.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...gn,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:a,emit:t}){const{proxy:n}=St(),{$q:r}=n,i=D(!1),s=D(!1),y=D(-1),f=D(""),d=D(!1),l=D(!1);let v=null,b=null,x,V,z,h=null,m,C,E,w;const T=D(null),_=D(null),F=D(null),q=D(null),Z=D(null),we=po(e),R=go(Kt),O=g(()=>Array.isArray(e.options)?e.options.length:0),G=g(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:N,virtualScrollSliceSizeComputed:B,localResetVirtualScroll:le,padVirtualScroll:ne,onVirtualScrollEvt:Ve,scrollTo:Be,setVirtualScrollSize:at}=Gi({virtualScrollLength:O,getVirtualScrollTarget:On,getVirtualScrollEl:Qt,virtualScrollItemSizeComputed:G}),p=hn(),A=g(()=>{const o=e.mapOptions===!0&&e.multiple!==!0,$=e.modelValue!==void 0&&(e.modelValue!==null||o===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const M=e.mapOptions===!0&&x!==void 0?x:[],H=$.map(oe=>zn(oe,M));return e.modelValue===null&&o===!0?H.filter(oe=>oe!==null):H}return $}),U=g(()=>{const o={};return Ui.forEach($=>{const M=e[$];M!==void 0&&(o[$]=M)}),o}),ae=g(()=>e.optionsDark===null?p.isDark.value:e.optionsDark),ce=g(()=>tn(A.value)),X=g(()=>{let o="q-field__input q-placeholder col";return e.hideSelected===!0||A.value.length===0?[o,e.inputClass]:(o+=" q-field__input--padding",e.inputClass===void 0?o:[o,e.inputClass])}),K=g(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),ue=g(()=>O.value===0),Q=g(()=>A.value.map(o=>Se.value(o)).join(", ")),he=g(()=>e.displayValue!==void 0?e.displayValue:Q.value),ze=g(()=>e.optionsHtml===!0?()=>!0:o=>o?.html===!0),dt=g(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||A.value.some(ze.value))),$e=g(()=>p.focused.value===!0?e.tabindex:-1),ft=g(()=>{const o={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${p.targetUid.value}_lb`};return y.value>=0&&(o["aria-activedescendant"]=`${p.targetUid.value}_${y.value}`),o}),Oe=g(()=>({id:`${p.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),je=g(()=>A.value.map((o,$)=>({index:$,opt:o,html:ze.value(o),selected:!0,removeAtIndex:Tn,toggleOption:De,tabindex:$e.value}))),mt=g(()=>{if(O.value===0)return[];const{from:o,to:$}=N.value;return e.options.slice(o,$).map((M,H)=>{const oe=Pe.value(M)===!0,te=_t(M)===!0,fe=o+H,se={clickable:!0,active:te,activeClass:lt.value,manualFocus:!0,focused:!1,disable:oe,tabindex:-1,dense:e.optionsDense,dark:ae.value,role:"option","aria-selected":te===!0?"true":"false",id:`${p.targetUid.value}_${fe}`,onClick:()=>{De(M)}};return oe!==!0&&(y.value===fe&&(se.focused=!0),r.platform.is.desktop===!0&&(se.onMousemove=()=>{i.value===!0&&Le(fe)})),{index:fe,opt:M,html:ze.value(M),label:Se.value(M),selected:se.active,focused:se.focused,toggleOption:De,setOptionIndex:Le,itemProps:se}})}),it=g(()=>e.dropdownIcon!==void 0?e.dropdownIcon:r.iconSet.arrow.dropdown),bt=g(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),lt=g(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),_e=g(()=>Tt(e.optionValue,"value")),Se=g(()=>Tt(e.optionLabel,"label")),Pe=g(()=>Tt(e.optionDisable,"disable")),vt=g(()=>A.value.map(_e.value)),An=g(()=>{const o={onInput:Kt,onChange:R,onKeydown:Ut,onKeyup:Gt,onKeypress:Ht,onFocus:Pt,onClick($){V===!0&&Ke($)}};return o.onCompositionstart=o.onCompositionupdate=o.onCompositionend=R,o});pe(A,o=>{x=o,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&p.innerLoading.value!==!0&&(s.value!==!0&&i.value!==!0||ce.value!==!0)&&(z!==!0&&Qe(),(s.value===!0||i.value===!0)&&Ge(""))},{immediate:!0}),pe(()=>e.fillInput,Qe),pe(i,xt),pe(O,Hn);function Ft(o){return e.emitValue===!0?_e.value(o):o}function Ct(o){if(o!==-1&&o<A.value.length)if(e.multiple===!0){const $=e.modelValue.slice();t("remove",{index:o,value:$.splice(o,1)[0]}),t("update:modelValue",$)}else t("update:modelValue",null)}function Tn(o){Ct(o),p.focus()}function Bt(o,$){const M=Ft(o);if(e.multiple!==!0){e.fillInput===!0&&rt(Se.value(o),!0,!0),t("update:modelValue",M);return}if(A.value.length===0){t("add",{index:0,value:M}),t("update:modelValue",e.multiple===!0?[M]:M);return}if($===!0&&_t(o)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const H=e.modelValue.slice();t("add",{index:H.length,value:M}),H.push(M),t("update:modelValue",H)}function De(o,$){if(p.editable.value!==!0||o===void 0||Pe.value(o)===!0)return;const M=_e.value(o);if(e.multiple!==!0){$!==!0&&(rt(e.fillInput===!0?Se.value(o):"",!0,!0),Ee()),_.value?.focus(),(A.value.length===0||st(_e.value(A.value[0]),M)!==!0)&&t("update:modelValue",e.emitValue===!0?M:o);return}if((V!==!0||d.value===!0)&&p.focus(),Pt(),A.value.length===0){const te=e.emitValue===!0?M:o;t("add",{index:0,value:te}),t("update:modelValue",e.multiple===!0?[te]:te);return}const H=e.modelValue.slice(),oe=vt.value.findIndex(te=>st(te,M));if(oe!==-1)t("remove",{index:oe,value:H.splice(oe,1)[0]});else{if(e.maxValues!==void 0&&H.length>=e.maxValues)return;const te=e.emitValue===!0?M:o;t("add",{index:H.length,value:te}),H.push(te)}t("update:modelValue",H)}function Le(o){if(r.platform.is.desktop!==!0)return;const $=o!==-1&&o<O.value?o:-1;y.value!==$&&(y.value=$)}function pt(o=1,$){if(i.value===!0){let M=y.value;do M=an(M+o,-1,O.value-1);while(M!==-1&&M!==y.value&&Pe.value(e.options[M])===!0);y.value!==M&&(Le(M),Be(M),$!==!0&&e.useInput===!0&&e.fillInput===!0&&gt(M>=0?Se.value(e.options[M]):m,!0))}}function zn(o,$){const M=H=>st(_e.value(H),o);return e.options.find(M)||$.find(M)||o}function _t(o){const $=_e.value(o);return vt.value.find(M=>st(M,$))!==void 0}function Pt(o){e.useInput===!0&&_.value!==null&&(o===void 0||_.value===o.target&&o.target.value===Q.value)&&_.value.select()}function Lt(o){Io(o,27)===!0&&i.value===!0&&(Ke(o),Ee(),Qe()),t("keyup",o)}function Gt(o){const{value:$}=o.target;if(o.keyCode!==void 0){Lt(o);return}if(o.target.value="",v!==null&&(clearTimeout(v),v=null),b!==null&&(clearTimeout(b),b=null),Qe(),typeof $=="string"&&$.length!==0){const M=$.toLocaleLowerCase(),H=te=>{const fe=e.options.find(se=>String(te.value(se)).toLocaleLowerCase()===M);return fe===void 0?!1:(A.value.indexOf(fe)===-1?De(fe):Ee(),!0)},oe=te=>{H(_e)!==!0&&te!==!0&&H(Se)!==!0&&Ge($,!0,()=>oe(!0))};oe()}else p.clearValue(o)}function Ht(o){t("keypress",o)}function Ut(o){if(t("keydown",o),yo(o)===!0)return;const $=f.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),M=o.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(y.value!==-1||$===!0);if(o.keyCode===27){$t(o);return}if(o.keyCode===9&&M===!1){He();return}if(o.target===void 0||o.target.id!==p.targetUid.value||p.editable.value!==!0)return;if(o.keyCode===40&&p.innerLoading.value!==!0&&i.value===!1){Je(o),Ue();return}if(o.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&f.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Ct(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&t("update:modelValue",null);return}(o.keyCode===35||o.keyCode===36)&&(typeof f.value!="string"||f.value.length===0)&&(Je(o),y.value=-1,pt(o.keyCode===36?1:-1,e.multiple)),(o.keyCode===33||o.keyCode===34)&&B.value!==void 0&&(Je(o),y.value=Math.max(-1,Math.min(O.value,y.value+(o.keyCode===33?-1:1)*B.value.view)),pt(o.keyCode===33?1:-1,e.multiple)),(o.keyCode===38||o.keyCode===40)&&(Je(o),pt(o.keyCode===38?-1:1,e.multiple));const H=O.value;if((E===void 0||w<Date.now())&&(E=""),H>0&&e.useInput!==!0&&o.key!==void 0&&o.key.length===1&&o.altKey===!1&&o.ctrlKey===!1&&o.metaKey===!1&&(o.keyCode!==32||E.length!==0)){i.value!==!0&&Ue(o);const oe=o.key.toLocaleLowerCase(),te=E.length===1&&E[0]===oe;w=Date.now()+1500,te===!1&&(Je(o),E+=oe);const fe=new RegExp("^"+E.split("").map(kt=>Hi.indexOf(kt)!==-1?"\\"+kt:kt).join(".*"),"i");let se=y.value;if(te===!0||se<0||fe.test(Se.value(e.options[se]))!==!0)do se=an(se+1,-1,H-1);while(se!==y.value&&(Pe.value(e.options[se])===!0||fe.test(Se.value(e.options[se]))!==!0));y.value!==se&&Me(()=>{Le(se),Be(se),se>=0&&e.useInput===!0&&e.fillInput===!0&&gt(Se.value(e.options[se]),!0)});return}if(!(o.keyCode!==13&&(o.keyCode!==32||e.useInput===!0||E!=="")&&(o.keyCode!==9||M===!1))){if(o.keyCode!==9&&Je(o),y.value!==-1&&y.value<H){De(e.options[y.value]);return}if($===!0){const oe=(te,fe)=>{if(fe){if(fn(fe)!==!0)return}else fe=e.newValueMode;if(rt("",e.multiple!==!0,!0),te==null)return;(fe==="toggle"?De:Bt)(te,fe==="add-unique"),e.multiple!==!0&&(_.value?.focus(),Ee())};if(e.onNewValue!==void 0?t("newValue",f.value,oe):oe(f.value),e.multiple!==!0)return}i.value===!0?He():p.innerLoading.value!==!0&&Ue()}}function Qt(){return V===!0?Z.value:F.value!==null&&F.value.contentEl!==null?F.value.contentEl:void 0}function On(){return Qt()}function jn(){return e.hideSelected===!0?[]:a["selected-item"]!==void 0?je.value.map(o=>a["selected-item"](o)).slice():a.selected!==void 0?[].concat(a.selected()):e.useChips===!0?je.value.map((o,$)=>W(To,{key:"option-"+$,removable:p.editable.value===!0&&Pe.value(o.opt)!==!0,dense:!0,textColor:e.color,tabindex:$e.value,onRemove(){o.removeAtIndex($)}},()=>W("span",{class:"ellipsis",[o.html===!0?"innerHTML":"textContent"]:Se.value(o.opt)}))):[W("span",{class:"ellipsis",[dt.value===!0?"innerHTML":"textContent"]:he.value})]}function Jt(){if(ue.value===!0)return a["no-option"]!==void 0?a["no-option"]({inputValue:f.value}):void 0;const o=a.option!==void 0?a.option:M=>W(Ze,{key:M.index,...M.itemProps},()=>W(Cn,()=>W(zo,()=>W("span",{[M.html===!0?"innerHTML":"textContent"]:M.label}))));let $=ne("div",mt.value.map(o));return a["before-options"]!==void 0&&($=a["before-options"]().concat($)),jt(a["after-options"],$)}function Dn(o,$){const M=$===!0?{...ft.value,...p.splitAttrs.attributes.value}:void 0,H={ref:$===!0?_:void 0,key:"i_t",class:X.value,style:e.inputStyle,value:f.value!==void 0?f.value:"",type:"search",...M,id:$===!0?p.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":o===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...An.value};return o!==!0&&V===!0&&(Array.isArray(H.class)===!0?H.class=[...H.class,"no-pointer-events"]:H.class+=" no-pointer-events"),W("input",H)}function Kt(o){v!==null&&(clearTimeout(v),v=null),b!==null&&(clearTimeout(b),b=null),!(o&&o.target&&o.target.qComposing===!0)&&(gt(o.target.value||""),z=!0,m=f.value,p.focused.value!==!0&&(V!==!0||d.value===!0)&&p.focus(),e.onFilter!==void 0&&(v=setTimeout(()=>{v=null,Ge(f.value)},e.inputDebounce)))}function gt(o,$){f.value!==o&&(f.value=o,$===!0||e.inputDebounce===0||e.inputDebounce==="0"?t("inputValue",o):b=setTimeout(()=>{b=null,t("inputValue",o)},e.inputDebounce))}function rt(o,$,M){z=M!==!0,e.useInput===!0&&(gt(o,!0),($===!0||M!==!0)&&(m=o),$!==!0&&Ge(o))}function Ge(o,$,M){if(e.onFilter===void 0||$!==!0&&p.focused.value!==!0)return;p.innerLoading.value===!0?t("filterAbort"):(p.innerLoading.value=!0,l.value=!0),o!==""&&e.multiple!==!0&&A.value.length!==0&&z!==!0&&o===Se.value(A.value[0])&&(o="");const H=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);h!==null&&clearTimeout(h),h=H,t("filter",o,(oe,te)=>{($===!0||p.focused.value===!0)&&h===H&&(clearTimeout(h),typeof oe=="function"&&oe(),l.value=!1,Me(()=>{p.innerLoading.value=!1,p.editable.value===!0&&($===!0?i.value===!0&&Ee():i.value===!0?xt(!0):i.value=!0),typeof te=="function"&&Me(()=>{te(n)}),typeof M=="function"&&Me(()=>{M(n)})}))},()=>{p.focused.value===!0&&h===H&&(clearTimeout(h),p.innerLoading.value=!1,l.value=!1),i.value===!0&&(i.value=!1)})}function En(){return W(ut,{ref:F,class:K.value,style:e.popupContentStyle,modelValue:i.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&ue.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:ae.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:bt.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Oe.value,onScrollPassive:Ve,onBeforeShow:Xt,onBeforeHide:qn,onShow:Rn},Jt)}function qn(o){Zt(o),He()}function Rn(){at()}function Nn(o){Ke(o),_.value?.focus(),d.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Fn(o){Ke(o),Me(()=>{d.value=!1})}function Bn(){const o=[W(Fi,{class:`col-auto ${p.fieldClass.value}`,...U.value,for:p.targetUid.value,dark:ae.value,square:!0,loading:l.value,itemAligned:!1,filled:!0,stackLabel:f.value.length!==0,...p.splitAttrs.listeners.value,onFocus:Nn,onBlur:Fn},{...a,rawControl:()=>p.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&o.push(W("div",{ref:Z,class:K.value+" scroll",style:e.popupContentStyle,...Oe.value,onClick:$t,onScrollPassive:Ve},Jt())),W(wo,{ref:q,modelValue:s.value,position:e.useInput===!0?"top":void 0,transitionShow:C,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Xt,onBeforeHide:Pn,onHide:Ln,onShow:Gn},()=>W("div",{class:"q-select__dialog"+(ae.value===!0?" q-select__dialog--dark q-dark":"")+(d.value===!0?" q-select__dialog--focused":"")},o))}function Pn(o){Zt(o),q.value!==null&&q.value.__updateRefocusTarget(p.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),p.focused.value=!1}function Ln(o){Ee(),p.focused.value===!1&&t("blur",o),Qe()}function Gn(){const o=document.activeElement;(o===null||o.id!==p.targetUid.value)&&_.value!==null&&_.value!==o&&_.value.focus(),at()}function He(){s.value!==!0&&(y.value=-1,i.value===!0&&(i.value=!1),p.focused.value===!1&&(h!==null&&(clearTimeout(h),h=null),p.innerLoading.value===!0&&(t("filterAbort"),p.innerLoading.value=!1,l.value=!1)))}function Ue(o){p.editable.value===!0&&(V===!0?(p.onControlFocusin(o),s.value=!0,Me(()=>{p.focus()})):p.focus(),e.onFilter!==void 0?Ge(f.value):(ue.value!==!0||a["no-option"]!==void 0)&&(i.value=!0))}function Ee(){s.value=!1,He()}function Qe(){e.useInput===!0&&rt(e.multiple!==!0&&e.fillInput===!0&&A.value.length!==0&&Se.value(A.value[0])||"",!0,!0)}function xt(o){let $=-1;if(o===!0){if(A.value.length!==0){const M=_e.value(A.value[0]);$=e.options.findIndex(H=>st(_e.value(H),M))}le($)}Le($)}function Hn(o,$){i.value===!0&&p.innerLoading.value===!1&&(le(-1,!0),Me(()=>{i.value===!0&&p.innerLoading.value===!1&&(o>$?le():xt(!0))}))}function Wt(){s.value===!1&&F.value!==null&&F.value.updatePosition()}function Xt(o){o!==void 0&&Ke(o),t("popupShow",o),p.hasPopupOpen=!0,p.onControlFocusin(o)}function Zt(o){o!==void 0&&Ke(o),t("popupHide",o),p.hasPopupOpen=!1,p.onControlFocusout(o)}function Yt(){V=r.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?a["no-option"]!==void 0||e.onFilter!==void 0||ue.value===!1:!0),C=r.platform.is.ios===!0&&V===!0&&e.useInput===!0?"fade":e.transitionShow}return ho(Yt),So(Wt),Yt(),Sn(()=>{v!==null&&clearTimeout(v),b!==null&&clearTimeout(b)}),Object.assign(n,{showPopup:Ue,hidePopup:Ee,removeAtIndex:Ct,add:Bt,toggleOption:De,getOptionIndex:()=>y.value,setOptionIndex:Le,moveOptionSelection:pt,filter:Ge,updateMenuPosition:Wt,updateInputValue:rt,isOptionSelected:_t,getEmittingOptionValue:Ft,isOptionDisabled:(...o)=>Pe.value.apply(null,o)===!0,getOptionValue:(...o)=>_e.value.apply(null,o),getOptionLabel:(...o)=>Se.value.apply(null,o)}),Object.assign(p,{innerValue:A,fieldClass:g(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:T,targetRef:_,hasValue:ce,showPopup:Ue,floatingLabel:g(()=>e.hideSelected!==!0&&ce.value===!0||typeof f.value=="number"||f.value.length!==0||tn(e.displayValue)),getControlChild:()=>{if(p.editable.value!==!1&&(s.value===!0||ue.value!==!0||a["no-option"]!==void 0))return V===!0?Bn():En();p.hasPopupOpen===!0&&(p.hasPopupOpen=!1)},controlEvents:{onFocusin(o){p.onControlFocusin(o)},onFocusout(o){p.onControlFocusout(o,()=>{Qe(),He()})},onClick(o){if($t(o),V!==!0&&i.value===!0){He(),_.value?.focus();return}Ue(o)}},getControl:o=>{const $=jn(),M=o===!0||s.value!==!0||V!==!0;if(e.useInput===!0)$.push(Dn(o,M));else if(p.editable.value===!0){const oe=M===!0?ft.value:void 0;$.push(W("input",{ref:M===!0?_:void 0,key:"d_t",class:"q-select__focus-target",id:M===!0?p.targetUid.value:void 0,value:he.value,readonly:!0,"data-autofocus":o===!0||e.autofocus===!0||void 0,...oe,onKeydown:Ut,onKeyup:Lt,onKeypress:Ht})),M===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&$.push(W("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Gt}))}if(we.value!==void 0&&e.disable!==!0&&vt.value.length!==0){const oe=vt.value.map(te=>W("option",{value:te,selected:!0}));$.push(W("select",{class:"hidden",name:we.value,multiple:e.multiple},oe))}const H=e.useInput===!0||M!==!0?void 0:p.splitAttrs.attributes.value;return W("div",{class:"q-field__native row items-center",...H,...p.splitAttrs.listeners.value},$)},getInnerAppend:()=>e.loading!==!0&&l.value!==!0&&e.hideDropdownIcon!==!0?[W(ge,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:it.value})]:null}),yn(p)}}),Ji={key:0,class:"context"},Ki={key:1,class:"context"},Wi={class:"children"},Xi=["title"],Zi={class:"relation"},Yi=["title"],el={class:"parents"},tl=["title"],nl=re({__name:"CategoryNameInput",props:{category:{type:bo,default:null}},emits:["change"],setup(e,{emit:a}){const t=me(),n=a,r=e,i=D(r.category.name),s=D([]),y=D([]),f=g(()=>new Set(r.category?.children.map(h=>h.name)??[]));function d(){r.category&&t.updateElement(r.category,{name:i.value}),s.value.forEach(h=>{t.addSpecificSynchronicCategory(h,r.category.specificsynchronicmodelId,`in:${r.category.id}`)}),s.value=[],n("change",i.value)}const l=g(()=>{const h=t.getSpecificSynchronicCategoriesByName(r.category.projectId,i.value),m=t.getSpecificSynchronicCategoryNamesByPrefix(r.category.projectId,i.value);if(h.length){const C=Object.fromEntries(h.map(w=>w.children.map(T=>[T.name,T])).flat()),E=Object.fromEntries(h.filter(w=>w.parent).map(w=>[w.parent?.name,w.parent]));return{reference:h[0],children:[...Object.values(C)],parents:[...Object.values(E)],completions:m}}else return{original:!0,completions:m}});function v(h){return f.value.has(h)}function b(h){return r.category.parent?.name==h}function x(h){return r.category?.name===h}function V(h){i.value=h,console.log("setName",h)}function z(h,m){console.log("filterNames",h,l.value?.completions),m(()=>{y.value=l.value?.completions??[]})}return(h,m)=>(u(),I(Y,null,[l.value.original?(u(),I("div",Ji,[...m[2]||(m[2]=[k("em",null,"Nom original",-1)])])):(u(),I("div",Ki,[k("div",Wi,[(u(!0),I(Y,null,ee(l.value.children,C=>(u(),I("div",{class:de(["category",{"has-child":v(C.name)}]),title:C.name,key:C.id},[v(C.name)?j("",!0):(u(),P(Co,{key:0,size:"10pt",modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=E=>s.value=E),val:C.name},null,8,["modelValue","val"])),J(" "+L(C.name),1)],10,Xi))),128))]),k("div",Zi,[l.value.reference?(u(),P(qe,{key:0,type:l.value.reference.abstractionType,childrenCount:l.value.children.length},null,8,["type","childrenCount"])):j("",!0)]),l.value.reference?(u(),I("div",{key:0,class:de(["category reference",{"is-current":x(l.value.reference.name)}]),title:l.value.reference.name},L(l.value.reference.name),11,Yi)):j("",!0),k("div",el,[(u(!0),I(Y,null,ee(l.value.parents,C=>(u(),I("div",{class:de(["category parent",{"has-parent":b(C?.name)}]),title:C?.name??"",key:C?.id??""},L(C?.name??""),11,tl))),128))])])),c(Qi,{dense:"",onFocus:m[1]||(m[1]=C=>C.target.select()),filled:"","model-value":i.value,"use-input":"","hide-selected":"","fill-input":"","input-debounce":0,options:l.value?.completions??[],onFilter:z,onInputValue:V,onKeyup:et(d,["enter"]),autofocus:""},{"no-option":S(()=>[c(Ze,null,{default:S(()=>[c(Cn,{class:"text-grey"},{default:S(()=>[...m[3]||(m[3]=[J(" No results ",-1)])]),_:1})]),_:1})]),_:1},8,["model-value","options"])],64))}}),ol=ve(nl,[["__scopeId","data-v-c3a6ff18"]]),al=["data-specificsynchroniccategory"],il=["data-specificsynchroniccategory"],ll={class:de(["specificsynchroniccategory-children"])},rl={key:0,class:"specificsynchroniccategory-justification"},sl={key:0,class:"justification-descriptems"},cl={class:"specificsynchroniccategory-relation"},ul={class:"specificsynchroniccategory-relationinfo"},dl={class:"specificsynchroniccategory-criterion"},fl={class:"criterion-tooltip"},ml={class:"specificsynchroniccategory-name"},vl={class:"element-toolbar"},pl={class:"element-toolbar-secondary on-name-hover"},gl={key:1,class:"specificsynchroniccategory-filler"},yl=re({__name:"SpecificSynchronicCategoryRepresentation",props:{categoryId:{type:String,default:""},genericGraph:{type:Object,default:null},layout:{type:String,default:"vertical"},hideJustifications:{type:Boolean,default:!1}},setup(e){const a=ke(),t=me(),{currentProjectId:n}=Fe(a),r=e,i=g(()=>t.getSpecificSynchronicCategory(r.categoryId)),s=g({get(){return i.value?i.value.name:""},set(N){t.updateSpecificSynchronicCategory(r.categoryId,{name:N})}}),y=g({get(){return i.value?i.value.color:""},set(N){t.updateSpecificSynchronicCategory(r.categoryId,{color:N})}}),f=g({get:()=>i.value?.criterion??"",set:N=>{t.updateSpecificSynchronicCategory(r.categoryId,{criterion:N})}}),d=g(()=>!i.value?.children.length),l=D(!1);d.value&&(l.value=!r.hideJustifications);const v=g(()=>l.value),b=g(()=>!i.value||!n.value?[]:r.genericGraph?t.getSpecificSynchronicCategoriesByName(n.value,i.value.name).map(B=>B.justification?.descriptems||[]).flat():i.value?.justification?.descriptems||[]),x=g(()=>b.value.length),V=g(()=>r.genericGraph?r.genericGraph.byName[s.value]:{});function z(){window.category=i.value,console.log("SpecificSynchronicCategory",{category:i.value})}function h(){console.log("Should expand SSC")}function m(N){i.value&&(t.addSpecificSynchronicCategory(a.newSSCId(),i.value.specificsynchronicmodelId,N,null),h())}function C(N){N||m(`in:${r.categoryId}`);const B=t.getSpecificSynchronicCategory(N);N!==r.categoryId&&B&&t.updateSpecificSynchronicCategory(N,{specificsynchronicmodelId:null,parentId:r.categoryId})}function E(N,B){B==="add"&&(B=`in:${r.categoryId}`),i.value&&(t.addSpecificSynchronicCategory(N,i.value.specificsynchronicmodelId,B,null),h())}function w(N){const B=t.getDescriptem(N);B&&(t.addTextSelectionToSpecificSynchronicCategory(B.toJSON(),r.categoryId),t.deleteDescriptem(N))}function T(N){const B=t.getAnnotation(N);B&&t.addTextSelectionToSpecificSynchronicCategory(B.toJSON(),r.categoryId)}function _(N){try{const B=JSON.parse(N);t.addTextSelectionToSpecificSynchronicCategory(B,r.categoryId)}catch(B){console.log(`Cannot parse ${N}: ${B}`)}}function F(N){t.updateSpecificSynchronicCategory(r.categoryId,{color:N})}function q(N,B){const le=t.getDescriptem(N);le&&i.value&&(t.addSpecificSynchronicCategory(a.newSSCId(),i.value.specificsynchronicmodelId,B,le.toJSON()),h())}function Z(N,B){const le=t.getAnnotation(N);le&&i.value&&(t.addSpecificSynchronicCategory(a.newSSCId(),i.value.specificsynchronicmodelId,B,le.toJSON()),h())}function we(N,B){try{const le=JSON.parse(N);le&&i.value&&(t.addSpecificSynchronicCategory(a.newSSCId(),i.value.specificsynchronicmodelId,B,le),h())}catch(le){console.log(`Cannot parse ${N}: ${le}`)}}function R(N){t.updateSpecificSynchronicCategory(r.categoryId,{abstractionType:N})}const O=[["Delete",()=>t.deleteSpecificSynchronicCategory(r.categoryId)]],G=[["Set as generic abstraction",()=>R("")],["Set as aggregation abstraction",()=>R("aggregation")],["Set as specialization abstraction",()=>R("specialization")],["Create a new child category",()=>m(`in:${r.categoryId}`)]];return(N,B)=>{const le=It("SpecificSynchronicCategoryRepresentation",!0);return u(),I("div",{ref:"container",class:de(["specificsynchroniccategory-container",`specificsynchroniccategory-${e.categoryId}`]),"data-specificsynchroniccategory":e.categoryId},[i.value?(u(),I("div",{key:0,class:de(["specificsynchroniccategory"]),style:Te({backgroundColor:i.value.color}),"data-specificsynchroniccategory":e.categoryId},[k("div",ll,[(u(!0),I(Y,null,ee(i.value.children,ne=>(u(),P(le,{key:ne.id,genericGraph:e.genericGraph,hideJustifications:e.hideJustifications,categoryId:ne.id},null,8,["genericGraph","hideJustifications","categoryId"]))),128))]),c(xe,{data:"add",types:"upmt/descriptem upmt/annotation upmt/selection",class:"row justify-center",onAnnotation:T,onSelection:_,onDescriptem:w},{default:S(()=>[v.value?(u(),I("div",rl,[e.genericGraph?(u(),I("ul",sl,[(u(!0),I(Y,null,ee(b.value,ne=>(u(),I("li",{key:ne.id},[c(Nt,{descriptemId:ne.id},null,8,["descriptemId"])]))),128))])):(u(),P(wt,{key:1,justificationId:i.value.justification?.id??""},null,8,["justificationId"]))])):j("",!0)]),_:1}),k("div",cl,[c(qe,{type:i.value.abstractionType,childrenCount:d.value?1:i.value.children.length},null,8,["type","childrenCount"]),k("div",ul,[k("div",dl,[J(L(f.value)+" ",1),f.value?(u(),P(Ie,{key:0,flat:"",dense:""},{default:S(()=>[k("div",fl,L(f.value),1)]),_:1})):j("",!0),c(nt,{modelValue:f.value,"onUpdate:modelValue":B[0]||(B[0]=ne=>f.value=ne),"auto-save":"",buttons:""},{default:S(ne=>[c(Ae,{label:"Criterion",type:"textarea",modelValue:ne.value,"onUpdate:modelValue":Ve=>ne.value=Ve,onKeyup:[et(ye(ne.set,["ctrl"]),["enter"]),et(ne.cancel,["esc"])],dense:"",autogrow:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:1},8,["modelValue"])]),d.value?j("",!0):(u(),P(Ne,{key:0,class:"specificsynchroniccategory-relationmenu",actions:G}))])]),c(xe,{data:"add",types:"upmt/specificsynchroniccategory upmt/genericsynchroniccategory upmt/selection upmt/descriptem upmt/annotation upmt/color",class:"row justify-center",onSpecificsynchroniccategory:C,onGenericsynchroniccategory:E,onAnnotation:T,onSelection:_,onDescriptem:w,onColor:F},{default:S(()=>[k("div",{class:de(["specificsynchroniccategory-header",{"has-error":V.value.errors?.length}])},[c(Ce,{type:"specificsynchroniccategory",data:e.categoryId,onClick:ye(z,["meta"])},{default:S(()=>[c(ge,{size:"xs",name:"mdi-source-branch"}),k("span",ml,[J(L(s.value)+" ",1),c(nt,{style:{zoom:"var(--chart-zoom)"},modelValue:s.value,"onUpdate:modelValue":B[1]||(B[1]=ne=>s.value=ne),"auto-save":""},{default:S(ne=>[c(ol,{onChange:ne.cancel,category:i.value},null,8,["onChange","category"])]),_:1},8,["modelValue"])]),V.value.errors?.length?(u(),P(Ie,{key:0,class:"bg-red-5",anchor:"top right",self:"top left"},{default:S(()=>[J(L(s.value)+" ",1),(u(!0),I(Y,null,ee(V.value.errors,(ne,Ve)=>(u(),I("div",{key:Ve},L(ne),1))),128))]),_:1})):(u(),P(Ie,{key:1},{default:S(()=>[J(L(s.value),1)]),_:1}))]),_:1},8,["data"]),k("div",vl,[c(Ot,{onClick:B[2]||(B[2]=ne=>l.value=!l.value),class:"descriptems-badge",color:"grey-6",title:`${x.value} descriptems`,rounded:""},{default:S(()=>[J(L(x.value),1)]),_:1},8,["title"]),c(qt,{element:i.value},null,8,["element"]),k("div",pl,[c(In,{modelValue:y.value,"onUpdate:modelValue":B[3]||(B[3]=ne=>y.value=ne)},null,8,["modelValue"]),c(Ne,{actions:O})])])],2)]),_:1}),i.value.specificsynchronicmodelId?(u(),P(xe,{key:0,data:`before:${e.categoryId}`,types:"upmt/specificsynchroniccategory upmt/genericsynchroniccategory upmt/selection upmt/descriptem upmt/annotation",class:"empty_padding newssc-dropzone",onSpecificsynchroniccategory:C,onGenericsynchroniccategory:E,onAnnotation:Z,onSelection:we,onDescriptem:q},{default:S(()=>[c(ie,{onClick:B[4]||(B[4]=ne=>m(`before:${e.categoryId}`)),dense:"",class:"newssc-button",icon:"mdi-menu-right"})]),_:1},8,["data"])):j("",!0),i.value.parentId?(u(),I("div",gl,[c(qe,{childrenCount:1})])):j("",!0)],12,il)):j("",!0)],10,al)}}}),hl=ve(yl,[["__scopeId","data-v-8279e306"]]),Sl=["data-specificsynchronicmodel"],Il={class:"specificsynchronicmodel-title"},wl={class:"specificsynchronicmodel-categories"},bl=re({__name:"SpecificSynchronicModelRepresentation",props:{modelId:{type:String,default:null},hideJustifications:{type:Boolean,default:!1}},setup(e){const a=ke(),t=me(),n=e,r=g(()=>t.getSpecificSynchronicModel(n.modelId)),i=g(()=>r.value?t.getGenericSynchronicGraphs(r.value.projectId):{});function s(){console.log("SSM showContent")}function y(){window.specificsynchronicmodel=r.value,console.log("specificsynchronicmodel",r.value)}function f(V,z){t.addSpecificSynchronicCategory(V,n.modelId,z,null),s()}function d(V,z){const h=t.getSpecificSynchronicCategory(V);h&&(t.addSpecificSynchronicCategory(h.name,n.modelId,z,null),s())}function l(V,z){const h=t.getDescriptem(V);h&&r.value&&(t.addSpecificSynchronicCategory(a.newSSCId(),n.modelId,z,h.toJSON()),s())}function v(V,z){const h=t.getAnnotation(V);h&&r.value&&(t.addSpecificSynchronicCategory(a.newSSCId(),n.modelId,z,h.toJSON()),s())}function b(V,z){try{const h=JSON.parse(V);r.value&&(t.addSpecificSynchronicCategory(a.newSSCId(),n.modelId,z,h),s())}catch(h){console.log(`Cannot parse ${V}: ${h}`)}}function x(V){r.value&&(t.addSpecificSynchronicCategory(a.newSSCId(),n.modelId,V,null),s())}return(V,z)=>r.value?(u(),I("div",{key:0,class:"specificsynchronicmodel-container","data-specificsynchronicmodel":e.modelId},[c(xe,{data:`inmodel:${e.modelId}`,types:"upmt/specificsynchroniccategory upmt/genericsynchroniccategory upmt/selection upmt/descriptem upmt/annotation",onSpecificsynchroniccategory:d,onGenericsynchroniccategory:f,onAnnotation:v,onSelection:b,onDescriptem:l},{default:S(()=>[c(Ce,{type:"specificsynchroniccategory",data:"",onClick:ye(y,["meta"])},{default:S(()=>[k("div",Il,[c(ge,{ref:"handle",class:"specificsynchronicmodel-handle",size:"xs",onClick:ye(y,["meta"]),name:"mdi-graph-outline"},null,512),c(ie,{dense:"",flat:"","no-caps":"",onClick:z[0]||(z[0]=h=>x(`inmodel:${e.modelId}`)),title:"Drop a descriptem here to create a new category"},{default:S(()=>[...z[1]||(z[1]=[J(" New category ",-1)])]),_:1})])]),_:1})]),_:1},8,["data"]),k("div",wl,[(u(!0),I(Y,null,ee(r.value.categories,h=>(u(),P(hl,{key:h.id,genericGraph:i.value,hideJustifications:!r.value.momentId,categoryId:h.id},null,8,["genericGraph","hideJustifications","categoryId"]))),128))])],8,Sl)):j("",!0)}}),Cl={key:0,row:""},_l={class:"fit fullwindow-height"},xl={key:0,class:"edited-model-container flex column"},kl={key:0},We="New interview",Vl=re({__name:"ProjectInterviewSelection",props:{projectId:{type:String,required:!0}},setup(e){const a=ke(),t=mn(),n=me(),r=e,i=g(()=>n.getProject(r.projectId)),s=g(()=>i.value&&i.value.interviews.length?"":"Add a first interview"),{editedSpecificSynchronicModelId:y}=Fe(a),f=D(""),d=D(20),l=D(90),v=D(500),b=g(()=>n.getSpecificSynchronicModel(y.value)),x=g(()=>!!b.value&&!!b.value.genericModelId),V=g(()=>n.getGenericSynchronicGraphs(r.projectId));pe(()=>r.projectId,()=>{i.value&&i.value.interviews[0]?f.value=i.value.interviews[0].id:f.value=We,a.resetIndexes(n.getSpecificSynchronicCategoryNamesByPrefix(r.projectId,a.SSCPrefix),n.getMomentsByProject(r.projectId).map(E=>E.name))},{immediate:!0}),pe(f,()=>{a.setCurrentInterview(n.getInterview(f.value)),a.setEditedSpecificSynchronicModelId("")});function z(E){const w=n.getRepo().Interview.save({name:E.name,participantName:E.participantName,note:E.note,date:E.date,text:E.text,parentId:r.projectId,annotations:[],analysis:{name:"",rootMoment:{name:"Root moment",children:[{name:"Moment 1",specificsynchronicmodel:{name:"Initial",categories:[]},justification:{name:"",descriptems:[]}}]}}}),T=w.analysis?.rootMoment;T&&(n.updateMoment(T.id,{interviewId:w.id}),T.children.length&&T.children[0]&&n.updateMoment(T.children[0].id,{interviewId:w.id})),setTimeout(()=>{t.push({query:{tab:E.name}}).catch(_=>{console.log(`Error when switching view: ${_}`)})},300)}function h(){i.value&&i.value.interviews[0]&&t.push({query:{tab:i.value.interviews[0].name}}).catch(E=>{console.log(`Error when switching view: ${E}`)})}function m(){n.buildGenericSynchronicModelFromGraphs(r.projectId,V.value)}function C(){a.setEditedSpecificSynchronicModelId("")}return _o(()=>{a.setCurrentInterview(null),a.setEditedSpecificSynchronicModelId("")}),(E,w)=>i.value?(u(),I("div",Cl,[c(Mt,{modelValue:d.value,"onUpdate:modelValue":w[4]||(w[4]=T=>d.value=T),limits:[10,90]},{before:S(()=>[k("div",_l,[c(Mo,{dense:"","active-class":"active-interview-label",align:"left","no-caps":"",inlineLabel:!0,modelValue:f.value,"onUpdate:modelValue":w[0]||(w[0]=T=>f.value=T),vertical:""},{default:S(()=>[(u(!0),I(Y,null,ee(i.value.interviews,T=>(u(),P(ln,{to:{query:{tab:T.label}},icon:"mdi-comment-text-outline",name:T.id,key:T.id,title:T.note,label:T.label},null,8,["to","name","title","label"]))),128)),(u(),P(ln,{to:{query:{tab:We}},label:s.value,class:"new-interview",name:We,key:We,icon:"add"},null,8,["to","label"]))]),_:1},8,["modelValue"]),c(pn),c(da,{projectId:e.projectId,genericGraphs:V.value,currentInterviewId:f.value},null,8,["projectId","genericGraphs","currentInterviewId"]),c(Et,{dense:"","dense-toggle":"",duration:0,"expand-icon-toggle":"",label:"Generic model overview"},{default:S(()=>[c(Yo,{projectId:e.projectId,currentInterviewId:f.value,categories:V.value.categories},null,8,["projectId","currentInterviewId","categories"])]),_:1})])]),after:S(()=>[c($o,{modelValue:f.value,"onUpdate:modelValue":w[3]||(w[3]=T=>f.value=T),animated:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:S(()=>[(u(!0),I(Y,null,ee(i.value.interviews,T=>(u(),P(on,{name:T.id,key:T.id},{default:S(()=>[c(Mt,{class:"fit fullwindow-height",modelValue:l.value,"onUpdate:modelValue":w[2]||(w[2]=_=>l.value=_),limits:[5,95]},{before:S(()=>[c(Mt,{class:"fit fullwindow-height flex",beforeClass:"flex",unit:"px",horizontal:"","separator-class":"bg-grey-4","separator-style":"height: 3px",modelValue:v.value,"onUpdate:modelValue":w[1]||(w[1]=_=>v.value=_)},{before:S(()=>[c(Ai,{interviewId:T.id},null,8,["interviewId"])]),after:S(()=>[b.value?(u(),I("div",xl,[c(Rt,{class:"row"},{default:S(()=>[c(jo,null,{default:S(()=>[w[6]||(w[6]=J(" Editing ",-1)),k("strong",null,L(b.value.moment?.descriptionLabel||b.value.name),1),x.value?(u(),I("span",kl,[c(ie,{onClick:m},{default:S(()=>[...w[5]||(w[5]=[J("Update generic model ",-1)])]),_:1})])):j("",!0)]),_:1}),c(ie,{icon:"mdi-close",flat:"",round:"",dense:"",size:"md",class:"float-right",onClick:C})]),_:1}),tt(y)?(u(),P(bl,{key:0,modelId:tt(y)},null,8,["modelId"])):j("",!0)])):j("",!0)]),_:2},1032,["modelValue"])]),after:S(()=>[c(Ni,{class:"fit fullwindow-height",interviewId:T.id},null,8,["interviewId"])]),_:2},1032,["modelValue"])]),_:2},1032,["name"]))),128)),(u(),P(on,{name:We,key:We},{default:S(()=>[c($n,{onValidate:z,onCancel:h})]),_:1}))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])):j("",!0)}}),Dl=ve(Vl,[["__scopeId","data-v-e9c087d9"]]);export{Dl as P};
